<div style="margin-bottom: 10px;" class="col-md-12 text-left">
    <button class="btn btn-primary mr15 btn-sm" nbTooltip="Back" nbTooltipStatus="primary" [nbTooltipIcon]="{icon: 'arrow-back-outline', pack: 'eva'}" (click)="back()"><i class="fa fa-arrow-left"
            aria-hidden="true"></i>
    </button>
</div>
<div class="col-md-12 mb20" style="margin-top: 15px !important;">
    <mat-tab-group animationDuration="1000ms" [(selectedIndex)]="selectedIndex" #tabGroup (selectedTabChange)="mapTab($event)">
        <div class="height-80vh">

            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">notification_important</mat-icon>
                    {{'Less_Kilometer_Travel_Alerts.Alerts' | translate}}
                </ng-template>
                <div class="row clearfix" style="margin-top: 5px;">
                    <div class="col-md-8 text-left">

                        <label>
                            <input type="search" matInput id="search_element" (keyup)="applyFilter($event)"
                                class="form-control search-field pull-left" placeholder="Search Vehicle">
                        </label>

                        <button class="btn btn-primary pull-left ml-20 mr15 btn-sm" (click)="search()"><i
                                class="fa fa-search"></i></button>

                        <button class="btn btn-danger pull-left mr15 btn-sm" mat-button (click)="epxportexcle()"><i
                                class="fa fa-file-excel"></i> &nbsp; {{'COMMON_BUTTON_ALL_COMPONENT.DOWNLOAD_EXCEL' |
                            translate}}</button>
                        <button class="btn btn-primary pull-left mr15 btn-sm" mat-button (click)="downloadPDF()"><i
                                class="fa fa-file-pdf"></i>
                            &nbsp; {{'COMMON_BUTTON_ALL_COMPONENT.DOWNLOAD_PDF' | translate}}</button>
                        <button class="btn btn-success pull-left mr1 btn-sm" nbTooltip="Refresh" (click)="refresh()" nbTooltipStatus="success" [nbTooltipIcon]="{icon: 'refresh-outline', pack: 'eva'}"><i
                                class="fa fa-sync"></i></button>
                    </div>
                    <div class="col-md-4 text-right">
                        <div class="form-group">
                            <button class="btn btn-warning btn-sm" (click)="add()"><b> + {{alert_type_name | translate}}
                                    </b></button>
                        </div>
                    </div>
                </div>


                <div>
                    <div class="example-container mat-elevation-z8" id="content" #content>
                        <div class="table-responsive" style="height: 500px;overflow: auto !important;">
                            <table class="table-bordered table" mat-table [dataSource]="dataSource" matSort>

                                <ng-container matColumnDef="id">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        ID
                                    </th>
                                    <td mat-cell *matCellDef="let element; let i = index;"> {{(i+1)}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="vehicle_number">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Vehicle Number' | translate}}
                                    </th>
                                    <td class="cellSpace" mat-cell *matCellDef="let element"><a (click)="edit(element)" style="cursor: pointer;text-decoration: underline;color: blue;">{{element.vehicle_number}}</a>
                                    </td>
                                </ng-container>


                                <ng-container matColumnDef="added_date">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Added Date Time' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element">{{element.added_date | date:'dd MMM yyyy hh:mm:ss a'}} </td>
                                </ng-container>

                                <ng-container matColumnDef="start_date_time">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Start Date Time' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.start_date_time| date: 'dd MMM yyyy hh:mm:ss a'}} </td>
                                </ng-container>

                                <ng-container matColumnDef="end_date_time">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.End Date Time' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.end_date_time | date: 'dd MMM yyyy hh:mm:ss a'}} </td>
                                </ng-container>

                                <ng-container matColumnDef="tripName">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Trip Name' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.trip_name}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="driverName">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Driver Name' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.driver_name}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="driverNumber">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Driver Number' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.driver_number}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="email">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Email' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.email}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="mobileNum">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Mobile Number' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element"> {{element.mobile_number}}
                                    </td>
                                </ng-container>

                                <ng-container matColumnDef="active">
                                    <th class="bg-primary !important" mat-header-cell *matHeaderCellDef mat-sort-header>
                                        {{'Less_Kilometer_Travel_Alerts.Status' | translate}}
                                    </th>
                                    <td mat-cell class="cellSpace" *matCellDef="let element" [ngStyle]="{'color':element.status_type_button_color}">
                                        {{element.status}} </td>
                                </ng-container>

                                <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></tr>
                                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

                            </table>

                            <div class="col-md-12" *ngIf="TableDataNotshow">
                                <p class="datanotfound">{{'DATA_NOT_FOUND_TITLE' | translate}}</p>
                            </div>

                        </div>
                    </div>
                </div>
            </mat-tab>

            <mat-tab>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">notifications_active</mat-icon>
                    {{'Less_Kilometer_Travel_Alerts.Notifications' | translate}}
                </ng-template>
                <div class="tab-content">
                    <div class="white-bg height-80vh" style="overflow:scroll;overflow-x: hidden; padding-top: 20px;" (scroll)="lessKmsReportScorll($event)">
                        <div *ngFor='let row of LessKmsReportList'>
                            <div class="clearfix mb10">
                                <div class="notification_header bg-primary col-md-12" style="margin-top:-20px">
                                    <h5>{{row.lessStartdate}}</h5>
                                </div>
                                <div class="col-md-12 mt20">
                                    <h6 class=" text-success "><b>{{row.alert_type}}</b></h6>
                                    <p class="date-time mt5">
                                        <span><i class="fa fa-calendar-alt"></i>{{row.lessStartdate}}</span>
                                        <span><i class="fa fa-clock"></i>{{row.lessStartTime}} -
                                            {{row.lessEndTime}}</span>
                                    </p>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <table class="table table-bordered mt10 table-nw">
                                                <tbody>
                                                    <tr class="bg-gray">
                                                        <th>ID</th>
                                                        <th> {{'NOTIFICATION_COMPONANT.VEHICLE_NUMBER' | translate}}
                                                        </th>
                                                        <th> {{'NOTIFICATION_COMPONANT.VEHICLE_TYPE' | translate}} </th>
                                                        <th> {{'NOTIFICATION_COMPONANT.DISTANCE' | translate}} </th>
                                                        <tr *ngFor='let innerRow of row.vehicle_list;let i = index'>
                                                            <td>{{ i + 1 }}</td>
                                                            <td>{{innerRow.vehicle_number}}</td>
                                                            <td>{{innerRow.vehicle_type}}</td>
                                                            <td>{{innerRow.total_distance}}</td>
                                                        </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr>
                        </div>
                        <div class="col-md-12" *ngIf="ShowLessKmsReportDataNotFound">
                            <p class="datanotfound">{{'DATA_NOT_FOUND_TITLE' | translate}}</p>
                        </div>
                    </div>
                </div>
            </mat-tab>
        </div>
    </mat-tab-group>
</div>