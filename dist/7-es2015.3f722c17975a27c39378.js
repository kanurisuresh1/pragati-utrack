(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{ZPG6:function(t,e,n){"use strict";n.r(e);var i=n("ofXK"),a=n("tyNb"),o=n("M9IT"),r=n("Dh3D"),c=n("+0xr"),l=n("Iab2"),s=n("6K47"),b=n("Z1p1"),m=n("0Mmh"),d=n("bdtZ"),u=n("NdpM"),g=n("3s9G"),p=n("fXoL"),h=n("0IaG"),f=n("qFsG"),_=n("bTqV"),C=n("aceb");const v=["content"];function D(t,e){1&t&&(p.Zb(0,"th",37),p.Rc(1," ID "),p.Yb())}function T(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function Y(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Organisation Name "),p.Yb())}function P(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.org_name)}}function R(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Branch Name "),p.Yb())}function y(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",40),p.Zb(1,"a",41),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().branch_details(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.branch_name,"")}}function Z(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Branch Location "),p.Yb())}function E(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.branch_location)}}function x(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Google Location "),p.Yb())}function w(t,e){if(1&t&&(p.Zb(0,"td",40),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.google_location," ")}}function k(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Latitude"),p.Yb())}function M(t,e){if(1&t&&(p.Zb(0,"td",40),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.latitude," ")}}function S(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Longitude "),p.Yb())}function O(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.longitude," ")}}function I(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Added Date & Time"),p.Yb())}function N(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",p.sc(2,1,t.added_date_time,"dd MMM yyyy hh:mm:ss a")," ")}}function A(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Updated Date & Time "),p.Yb())}function F(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(p.sc(2,1,t.updated_date_time,"dd MMM yyyy hh:mm:ss a"))}}function U(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Status "),p.Yb())}function B(t,e){if(1&t&&(p.Zb(0,"td",38),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.status)}}function L(t,e){1&t&&(p.Zb(0,"th",39),p.Rc(1," Edit "),p.Yb())}function z(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",38),p.Zb(1,"a"),p.Zb(2,"i",42),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().editBranch(n)})),p.Yb(),p.Yb(),p.Yb()}}function W(t,e){1&t&&p.Ub(0,"tr",43)}function V(t,e){1&t&&p.Ub(0,"tr",44)}function $(t,e){1&t&&(p.Zb(0,"div",45),p.Zb(1,"p",46),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const X=function(){return{icon:"refresh-outline",pack:"eva"}};let G=(()=>{class t{constructor(t,e,n,i,a){this.headerService=t,this.uTrackService=e,this.dialog=n,this.routes=i,this.activatedRoute=a,this.ELEMENT_DATA=[],this.displayedColumns=["id","org_name","branch_name","branch_location","google_location","latitude","longitude","added_date_time","updated_date_time","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.filterValue=""}ngOnInit(){this.uTrackService.isUserValid(),this.headerService.updateHeaderTitle("Branches"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_organisation_branch_list()}bus_organisation_branch_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_branch_list(t).subscribe(t=>{t.status?(this.ELEMENT_DATA=[],null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.TableDataNotshow=!1,this.dataSource.data=this.ELEMENT_DATA):this.TableDataNotshow=!0):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_organisation_branch_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}createBranch(){localStorage.setItem("BUS_ORGANISATION_BRACH_ID",""),this.routes.navigate(["web/bus_management/branches/create_branch"])}editBranch(t){this.routes.navigate(["web/bus_management/branches/edit_branch",t.bus_organisation_branch_id])}branch_details(t){this.routes.navigate(["web/bus_management/branches/branch_details",t.bus_organisation_branch_id])}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Branch Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.org_name),t.push(a.branch_name),t.push(a.branch_location),t.push(a.google_location),t.push(a.latitude),t.push(a.longitude),t.push(b.a.getDisplayDateTime(a.added_date_time)),t.push(b.a.getDisplayDateTime(a.updated_date_time)),t.push(a.status),n.push(t),i++}g.a.downloadPdf(e,["ID","Organisation Name","Branch Name","Branch Location","Google Location","Latitude","Longitude","Added Date & time","Updated Date & Time","Status"],n,"BranchList")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Branch Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Organisation Name","Branch Name","Branch Location","Google Location","Latitude","Longitude","Added Date & time","Updated Date & Time","Status"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.org_name),t.push(c.branch_name),t.push(c.branch_location),t.push(c.google_location),t.push(c.latitude),t.push(c.longitude),t.push(b.a.getDisplayDateTime(c.added_date_time)),t.push(b.a.getDisplayDateTime(c.updated_date_time)),t.push(c.status),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=25,e.getColumn(3).width=40,e.getColumn(4).width=30,e.getColumn(5).width=30,e.getColumn(6).width=15,e.getColumn(7).width=15,e.getColumn(8).width=30,e.getColumn(9).width=30,e.getColumn(10).width=15,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"BranchList.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a),p.Tb(h.b),p.Tb(a.c),p.Tb(a.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-branches"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(v,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:60,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Branch",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","org_name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","branch_name"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","branch_location"],["matColumnDef","google_location"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","latitude"],["matColumnDef","longitude"],["matColumnDef","added_date_time"],["matColumnDef","updated_date_time"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.createBranch()})),p.Zb(17,"b"),p.Rc(18,"+ Create Branch"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,D,2,0,"th",19),p.Pc(26,T,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,Y,2,0,"th",22),p.Pc(29,P,2,1,"td",20),p.Wb(),p.Xb(30,23),p.Pc(31,R,2,0,"th",22),p.Pc(32,y,3,1,"td",24),p.Wb(),p.Xb(33,25),p.Pc(34,Z,2,0,"th",22),p.Pc(35,E,2,1,"td",20),p.Wb(),p.Xb(36,26),p.Pc(37,x,2,0,"th",22),p.Pc(38,w,2,1,"td",27),p.Wb(),p.Xb(39,28),p.Pc(40,k,2,0,"th",22),p.Pc(41,M,2,1,"td",27),p.Wb(),p.Xb(42,29),p.Pc(43,S,2,0,"th",22),p.Pc(44,O,2,1,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,I,2,0,"th",22),p.Pc(47,N,3,4,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,A,2,0,"th",22),p.Pc(50,F,3,4,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,U,2,0,"th",22),p.Pc(53,B,2,1,"td",20),p.Wb(),p.Xb(54,33),p.Pc(55,L,2,0,"th",22),p.Pc(56,z,3,0,"td",20),p.Wb(),p.Pc(57,W,1,0,"tr",34),p.Pc(58,V,1,0,"tr",35),p.Yb(),p.Pc(59,$,3,0,"div",36),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,X)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(34),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],pipes:[i.e],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.img-circle[_ngcontent-%COMP%]{border-radius:50%!important;overflow:hidden;width:65px;height:65px;border:2px solid #1654c0;margin:0 auto 20px}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();const H=["content"];function q(t,e){1&t&&(p.Zb(0,"th",36),p.Rc(1," ID "),p.Yb())}function j(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function J(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Geofence Name "),p.Yb())}function Q(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",39),p.Zb(1,"a",40),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.geofence_name,"")}}function K(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Latitide "),p.Yb())}function tt(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.latitude," ")}}function et(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Longitude"),p.Yb())}function nt(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.longitude," ")}}function it(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Location "),p.Yb())}function at(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.location_name," ")}}function ot(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Radius"),p.Yb())}function rt(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.radius," ")}}function ct(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Added Date & Time"),p.Yb())}function lt(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",p.sc(2,1,t.added_date,"dd MMM yyyy hh:mm:ss a")," ")}}function st(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Modified Date & Time "),p.Yb())}function bt(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc("",p.sc(2,1,t.modified_date,"dd MMM yyyy hh:mm:ss a")," ")}}function mt(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Status "),p.Yb())}function dt(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.status)}}function ut(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Edit "),p.Yb())}function gt(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",37),p.Zb(1,"a"),p.Zb(2,"i",41),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function pt(t,e){1&t&&p.Ub(0,"tr",42)}function ht(t,e){1&t&&p.Ub(0,"tr",43)}function ft(t,e){1&t&&(p.Zb(0,"div",44),p.Zb(1,"p",45),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const _t=function(){return{icon:"refresh-outline",pack:"eva"}};let Ct=(()=>{class t{constructor(t,e,n){this.headerService=t,this.routes=e,this.uTrackService=n,this.ELEMENT_DATA=[],this.displayedColumns=["id","geofence_name","latitude","longitude","location_name","radius","added_date","modified_date","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.organisation_list=[],this.branch_organisation_list=[],this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Geofences"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_geofence_list()}bus_geofence_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_geofence_list(t).subscribe(t=>{t.status&&null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.dataSource.data=this.ELEMENT_DATA,this.TableDataNotshow=!1):this.TableDataNotshow=!0})}bus_organisation_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_list(t).subscribe(t=>{t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.organisation_list=t.data,this.org_name=this.organisation_list[0].bus_organisation_id)})}bus_organisation_branch_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_branch_list(t).subscribe(t=>{t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.branch_organisation_list=t.data,this.branch_org_name=this.branch_organisation_list[0].bus_organisation_branch_id)})}changeBranchOrg(t){}changeOrg(t){}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}refresh(){this.bus_geofence_list()}createGeofence(){this.routes.navigate(["web/bus_management/geofence/create_geofence"])}edit(t){this.routes.navigate(["web/bus_management/geofence/edit_geofence",t.geofence_id])}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Gefonce Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.geofence_name),t.push(a.latitude),t.push(a.longitude),t.push(a.location_name),t.push(a.radius),t.push(b.a.getDisplayDateTime(a.added_date)),t.push(b.a.getDisplayDateTime(a.modified_date)),t.push(a.status),n.push(t),i++}g.a.downloadPdf(e,["ID","Geofence Name","Latitude","Longitude","Location","Radius","Added Date & Time","Modified Date & Time","Status"],n,"GeofenceList")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Geofence Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Geofence Name","Latitude","Longitude","Location","Radius","Added Date & Time","Modified Date & Time","Status"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.geofence_name),t.push(c.latitude),t.push(c.longitude),t.push(c.location_name),t.push(c.radius),t.push(b.a.getDisplayDateTime(c.added_date)),t.push(b.a.getDisplayDateTime(c.modified_date)),t.push(c.status),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=35,e.getColumn(3).width=15,e.getColumn(4).width=15,e.getColumn(5).width=35,e.getColumn(6).width=8,e.getColumn(7).width=25,e.getColumn(8).width=25,e.getColumn(9).width=12,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"GefonceList.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(a.c),p.Tb(u.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-geofences"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(H,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:57,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Geofence",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","geofence_name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","latitude"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","longitude"],["matColumnDef","location_name"],["matColumnDef","radius"],["matColumnDef","added_date"],["matColumnDef","modified_date"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.createGeofence()})),p.Zb(17,"b"),p.Rc(18,"+ Create Geofence"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,q,2,0,"th",19),p.Pc(26,j,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,J,2,0,"th",22),p.Pc(29,Q,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,K,2,0,"th",22),p.Pc(32,tt,2,1,"td",25),p.Wb(),p.Xb(33,26),p.Pc(34,et,2,0,"th",22),p.Pc(35,nt,2,1,"td",25),p.Wb(),p.Xb(36,27),p.Pc(37,it,2,0,"th",22),p.Pc(38,at,2,1,"td",20),p.Wb(),p.Xb(39,28),p.Pc(40,ot,2,0,"th",22),p.Pc(41,rt,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,ct,2,0,"th",22),p.Pc(44,lt,3,4,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,st,2,0,"th",22),p.Pc(47,bt,3,4,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,mt,2,0,"th",22),p.Pc(50,dt,2,1,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,ut,2,0,"th",22),p.Pc(53,gt,3,0,"td",20),p.Wb(),p.Pc(54,pt,1,0,"tr",33),p.Pc(55,ht,1,0,"tr",34),p.Yb(),p.Pc(56,ft,3,0,"div",35),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,_t)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(31),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],pipes:[i.e],styles:[".auto-width[_ngcontent-%COMP%]{margin:0;padding:0 0 0 16px;float:left}label[_ngcontent-%COMP%]{font-size:13px;font-weight:700;margin-bottom:6px}.mt20[_ngcontent-%COMP%]{margin-top:20px}.mt10n[_ngcontent-%COMP%]{margin-top:-10px}.mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})(),vt=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-management"]],decls:1,vars:0,template:function(t,e){1&t&&p.Ub(0,"router-outlet")},directives:[a.h],styles:[""]}),t})(),Dt=(()=>{class t{constructor(t){this.headerService=t}ngOnInit(){this.headerService.updateHeaderTitle("Notifications")}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-notifications"]],decls:2,vars:0,template:function(t,e){1&t&&(p.Zb(0,"p"),p.Rc(1,"bus-notifications works!"),p.Yb())},styles:[""]}),t})();var Tt=n("3Pt+"),Yt=n("d3UM"),Pt=n("FKr1"),Rt=n("kmnG");function yt(t,e){1&t&&(p.Zb(0,"h4",22),p.Rc(1,"Create Passenger"),p.Yb())}function Zt(t,e){1&t&&(p.Zb(0,"h4",22),p.Rc(1,"Edit Passenger"),p.Yb())}function Et(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",23),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().changeOrg(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.bus_organisation_id),p.Eb(1),p.Tc(" ",t.org_name,"")}}function xt(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",23),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().changeBranchOrg(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.bus_organisation_branch_id),p.Eb(1),p.Tc(" ",t.branch_name,"")}}function wt(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Passenger Name "),p.Yb())}function kt(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Minimum 3 Letters "),p.Yb())}function Mt(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,wt,2,0,"span",15),p.Pc(2,kt,2,0,"span",15),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.passenger_name.errors.required),p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.passenger_name.errors.minlength)}}function St(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter User Name "),p.Yb())}function Ot(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Minimum 3 Letters "),p.Yb())}function It(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,St,2,0,"span",15),p.Pc(2,Ot,2,0,"span",15),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.username.errors.required),p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.username.errors.minlength)}}function Nt(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Email "),p.Yb())}function At(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,Nt,2,0,"span",15),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.email.errors.required)}}function Ft(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Mobile Number "),p.Yb())}function Ut(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Minimum 10 Letters "),p.Yb())}function Bt(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,Ft,2,0,"span",15),p.Pc(2,Ut,2,0,"span",15),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.mobile.errors.required),p.Eb(1),p.vc("ngIf",t.busPassengerForm.controls.mobile.errors.minlength)}}function Lt(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",24),p.lc("click",(function(){return p.Ic(t),p.pc().createRoute()})),p.Rc(1,"Create Passenger"),p.Yb()}}function zt(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",24),p.lc("click",(function(){return p.Ic(t),p.pc().createRoute()})),p.Rc(1,"Update Passenger"),p.Yb()}}let Wt=(()=>{class t{constructor(t,e,n,i){this.uTrackService=t,this.toasterService=e,this.dialogRef=n,this.isCreatePassenger=!1,this.geofence_list=[],this.to_geofence_id="",this.from_geofence_id="",this.organisation_list=[],this.branch_organisation_list=[],this.passenger_name="",this.username="",this.email="",this.mobile="",this.bus_route_id="",this.busPassengerForm=new Tt.i({bus_organisation_id:new Tt.f("",[Tt.A.required]),bus_organisation_branch_id:new Tt.f("",[Tt.A.required]),passenger_name:new Tt.f("",[Tt.A.required,Tt.A.minLength(3)]),username:new Tt.f("",[Tt.A.required,Tt.A.minLength(3)]),email:new Tt.f("",[Tt.A.required]),mobile:new Tt.f("",[Tt.A.required,Tt.A.minLength(10)])}),this.bus_route_list_data=[],null!=i&&null!=i&&(this.routeData=JSON.parse(i.bus_route_id))}ngOnInit(){null!=this.routeData&&null!=this.routeData?(this.isCreatePassenger=!1,this.bus_passenger_id=this.routeData.bus_passenger_id,this.bus_route_id=this.routeData.bus_route_id,this.passenger_name=this.routeData.route_name,this.username=this.routeData.username,this.mobile=this.routeData.mobile,this.email=this.routeData.email,this.org_name=this.routeData.bus_organisation_id,this.branch_org_name=this.routeData.bus_organisation_id,this.bus_route_list()):(this.isCreatePassenger=!0,this.bus_route_list())}bus_route_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_route_list(t).subscribe(t=>{t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.bus_route_list_data=t.data,this.bus_route_id=this.bus_route_list_data[0].bus_route_id,this.bus_organisation_list(),this.bus_organisation_branch_list())})}bus_organisation_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_list(t).subscribe(t=>{this.organisation_list=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.organisation_list=t.data,null==this.routeData&&null==this.routeData&&(this.org_name=this.organisation_list[0].bus_organisation_id))})}bus_organisation_branch_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_branch_list(t).subscribe(t=>{t.status&&(this.branch_organisation_list=[],null!=t.data&&null!=t.data&&t.data.length>0&&(this.branch_organisation_list=t.data,null==this.routeData&&null==this.routeData&&(this.branch_org_name=this.branch_organisation_list[0].bus_organisation_branch_id)))})}changeOrg(t){this.busPassengerForm.value.bus_organisation_id=t.bus_organisation_id}changeBranchOrg(t){this.busPassengerForm.value.bus_organisation_branch_id=t.bus_organisation_branch_id}createRoute(){let t=this.busPassengerForm.value.passenger_name,e=this.busPassengerForm.value.bus_organisation_id,n=this.busPassengerForm.value.bus_organisation_branch_id,i=this.busPassengerForm.value.email,a=this.busPassengerForm.value.username,o=this.busPassengerForm.value.mobile;if(null!=t&&null!=t&&""!=t&&t.length>=3&&null!=i&&null!=i&&""!=i&&null!=a&&null!=a&&""!=a&&a.length>=3&&null!=o&&null!=o&&""!=o&&o.length>=10)if(this.isCreatePassenger){const r=new FormData;r.append("user_id",localStorage.getItem("USER_ID")),r.append("bus_organisation_id",e),r.append("bus_organisation_branch_id",n),r.append("bus_route_timing_id","2"),r.append("bus_route_id","1"),r.append("bus_trip_id","1"),r.append("passenger_name",t),r.append("email",i),r.append("username",a),r.append("mobile",o),this.uTrackService.bus_passenger_create(r).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):this.toasterService.danger("Pragati Utrack",t.message)})}else{const r=new FormData;r.append("user_id",localStorage.getItem("USER_ID")),r.append("bus_organisation_id",e),r.append("bus_organisation_branch_id",n),r.append("bus_route_timing_id","2"),r.append("bus_route_id","1"),r.append("bus_trip_id","1"),r.append("passenger_name",t),r.append("email",i),r.append("username",a),r.append("mobile",o),r.append("bus_passenger_id",this.bus_passenger_id),this.uTrackService.bus_passenger_edit(r).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):this.toasterService.danger("Pragati Utrack",t.message)})}}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(u.a),p.Tb(C.cb),p.Tb(h.g),p.Tb(h.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-create-bus-passenger"]],decls:64,vars:17,consts:[[1,"col-md-12"],[1,"clearfix"],["style","color: blue;",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"card-body"],[1,"col-md-12",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"required"],["formControlName","bus_organisation_id","placeholder","Select Organisation",1,"form-control",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","bus_organisation_branch_id","placeholder","Select Organisation Branch",1,"form-control",3,"ngModel","ngModelChange"],["type","text","formControlName","passenger_name","onkeypress","return /[a-z]/i.test(event.key)","maxlength","30","placeholder","Enter Passenger Name",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],[4,"ngIf"],["type","text","formControlName","username","onkeypress","return /[a-z]/i.test(event.key)","maxlength","30","placeholder","Enter User Name",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],["type","text","formControlName","email","maxlength","30","placeholder","Enter Email",1,"form-control",3,"ngModel","ngModelChange"],["type","text","formControlName","mobile","oninput","this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\\..*)\\./g, '$1');","maxlength","10","placeholder","Enter Number Name",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],[1,"col-md-12","text-center"],["mat-dialog-close","false",1,"btn","btn-warning","btn-sm","mrl5"],["class","btn btn-primary btn-sm mrl5",3,"click",4,"ngIf"],[2,"color","blue"],[3,"value","click"],[1,"btn","btn-primary","btn-sm","mrl5",3,"click"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Pc(2,yt,2,0,"h4",2),p.Pc(3,Zt,2,0,"h4",2),p.Ub(4,"hr"),p.Yb(),p.Yb(),p.Zb(5,"section",3),p.Zb(6,"div",4),p.Zb(7,"div",5),p.Zb(8,"div",6),p.Zb(9,"div",7),p.Zb(10,"div",8),p.Zb(11,"div",9),p.Zb(12,"label"),p.Rc(13," Bus Organisation "),p.Zb(14,"span",10),p.Rc(15,"*"),p.Yb(),p.Yb(),p.Zb(16,"mat-select",11),p.lc("ngModelChange",(function(t){return e.org_name=t})),p.Pc(17,Et,2,2,"mat-option",12),p.Yb(),p.Yb(),p.Yb(),p.Zb(18,"div",8),p.Zb(19,"div",9),p.Zb(20,"label"),p.Rc(21,"Bus Organisation Branch "),p.Zb(22,"span",10),p.Rc(23,"*"),p.Yb(),p.Yb(),p.Zb(24,"mat-select",13),p.lc("ngModelChange",(function(t){return e.branch_org_name=t})),p.Pc(25,xt,2,2,"mat-option",12),p.Yb(),p.Yb(),p.Yb(),p.Zb(26,"div",8),p.Zb(27,"div",9),p.Zb(28,"label"),p.Rc(29," Passenger Name "),p.Zb(30,"span",10),p.Rc(31,"*"),p.Yb(),p.Yb(),p.Zb(32,"input",14),p.lc("ngModelChange",(function(t){return e.passenger_name=t})),p.Yb(),p.Pc(33,Mt,3,2,"mat-error",15),p.Yb(),p.Yb(),p.Zb(34,"div",8),p.Zb(35,"div",9),p.Zb(36,"label"),p.Rc(37," User Name "),p.Zb(38,"span",10),p.Rc(39,"*"),p.Yb(),p.Yb(),p.Zb(40,"input",16),p.lc("ngModelChange",(function(t){return e.username=t})),p.Yb(),p.Pc(41,It,3,2,"mat-error",15),p.Yb(),p.Yb(),p.Zb(42,"div",8),p.Zb(43,"div",9),p.Zb(44,"label"),p.Rc(45," Email "),p.Zb(46,"span",10),p.Rc(47,"*"),p.Yb(),p.Yb(),p.Zb(48,"input",17),p.lc("ngModelChange",(function(t){return e.email=t})),p.Yb(),p.Pc(49,At,2,1,"mat-error",15),p.Yb(),p.Yb(),p.Zb(50,"div",8),p.Zb(51,"div",9),p.Zb(52,"label"),p.Rc(53," Mobile Number "),p.Zb(54,"span",10),p.Rc(55,"*"),p.Yb(),p.Yb(),p.Zb(56,"input",18),p.lc("ngModelChange",(function(t){return e.mobile=t})),p.Yb(),p.Pc(57,Bt,3,2,"mat-error",15),p.Yb(),p.Yb(),p.Yb(),p.Zb(58,"div",19),p.Zb(59,"div",9),p.Zb(60,"button",20),p.Rc(61,"Cancel"),p.Yb(),p.Pc(62,Lt,2,0,"button",21),p.Pc(63,zt,2,0,"button",21),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(2),p.vc("ngIf",e.isCreatePassenger),p.Eb(1),p.vc("ngIf",!e.isCreatePassenger),p.Eb(5),p.vc("formGroup",e.busPassengerForm),p.Eb(8),p.vc("ngModel",e.org_name),p.Eb(1),p.vc("ngForOf",e.organisation_list),p.Eb(7),p.vc("ngModel",e.branch_org_name),p.Eb(1),p.vc("ngForOf",e.branch_organisation_list),p.Eb(7),p.vc("ngModel",e.passenger_name),p.Eb(1),p.vc("ngIf",e.busPassengerForm.controls.passenger_name.errors&&e.busPassengerForm.controls.passenger_name.touched),p.Eb(7),p.vc("ngModel",e.username),p.Eb(1),p.vc("ngIf",e.busPassengerForm.controls.username.errors&&e.busPassengerForm.controls.username.touched),p.Eb(7),p.vc("ngModel",e.email),p.Eb(1),p.vc("ngIf",e.busPassengerForm.controls.email.errors&&e.busPassengerForm.controls.email.touched),p.Eb(7),p.vc("ngModel",e.mobile),p.Eb(1),p.vc("ngIf",e.busPassengerForm.controls.mobile.errors&&e.busPassengerForm.controls.mobile.touched),p.Eb(5),p.vc("ngIf",e.isCreatePassenger),p.Eb(1),p.vc("ngIf",!e.isCreatePassenger))},directives:[i.p,Tt.r,Tt.j,Yt.a,Tt.q,Tt.h,i.o,Tt.d,Tt.l,h.d,Pt.o,Rt.b],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1.25rem}.required[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{font-weight:700}.mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.model-resize-outviwe[_ngcontent-%COMP%]{margin-top:70px;max-width:650px}.model-resize[_ngcontent-%COMP%]{height:450px;width:650px;margin-left:-110px}.mrl5[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}  .mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:hidden;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}"]}),t})();const Vt=["content"];function $t(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," ID "),p.Yb())}function Xt(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function Gt(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Vehicle Number "),p.Yb())}function Ht(t,e){if(1&t&&(p.Zb(0,"td",41),p.Zb(1,"a",42),p.Rc(2),p.Yb(),p.Yb()),2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.vehicle_number,"")}}function qt(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Passenger Name "),p.Yb())}function jt(t,e){if(1&t&&(p.Zb(0,"td",41),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.passenger_name," ")}}function Jt(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Username "),p.Yb())}function Qt(t,e){if(1&t&&(p.Zb(0,"td",41),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.username," ")}}function Kt(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Mobile"),p.Yb())}function te(t,e){if(1&t&&(p.Zb(0,"td",41),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.mobile," ")}}function ee(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Email "),p.Yb())}function ne(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.email," ")}}function ie(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Organisation Name "),p.Yb())}function ae(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.org_name," ")}}function oe(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Branch Name "),p.Yb())}function re(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.branch_name)}}function ce(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Route Name "),p.Yb())}function le(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.route_name)}}function se(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Trip Type "),p.Yb())}function be(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.trip_type)}}function me(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Trip Start Time"),p.Yb())}function de(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_start_time," ")}}function ue(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Trip End Time"),p.Yb())}function ge(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_end_time," ")}}function pe(t,e){1&t&&(p.Zb(0,"th",40),p.Rc(1," Edit "),p.Yb())}function he(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",39),p.Zb(1,"a"),p.Zb(2,"i",43),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function fe(t,e){1&t&&p.Ub(0,"tr",44)}function _e(t,e){1&t&&p.Ub(0,"tr",45)}const Ce=function(){return{icon:"refresh-outline",pack:"eva"}};let ve=(()=>{class t{constructor(t,e,n){this.headerService=t,this.uTrackService=e,this.dialog=n,this.ELEMENT_DATA=[],this.displayedColumns=["id","vehicle_number","passenger_name","username","mobile","email","org_name","branch_name","route_name","trip_type","trip_start_time","trip_end_time","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Passengers"),this.bus_passenger_list()}bus_passenger_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_passenger_list(t).subscribe(t=>{t.status?(this.ELEMENT_DATA=[],null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.TableDataNotshow=!1,this.dataSource.data=this.ELEMENT_DATA):this.TableDataNotshow=!0):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_passenger_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}add(){this.dialog.open(Wt,{width:"50%"}).afterClosed().subscribe(t=>{this.bus_passenger_list()})}edit(t){let e=JSON.stringify(t);this.dialog.open(Wt,{width:"50%",data:{bus_route_id:e}}).afterClosed().subscribe(t=>{this.bus_passenger_list()})}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Passengers Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.vehicle_number),t.push(a.passenger_name),t.push(a.username),t.push(a.mobile),t.push(a.email),t.push(a.org_name),t.push(a.branch_name),t.push(a.route_name),t.push(a.trip_type),t.push(a.trip_start_time),t.push(a.trip_end_time),n.push(t),i++}g.a.downloadPdf(e,["ID","Vehicle Number","Passenger Name","Username","Mobile","Email","Organisation Name","Branch Name","Route Name","Trip Type","Trip Start Time","Trip End Time"],n,"BusPassengersReport")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Passengers Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Vehicle Number","Passenger Name","Username","Mobile","Email","Organisation Name","Branch Name","Route Name","Trip Type","Trip Start Time","Trip End Time"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.vehicle_number),t.push(c.passenger_name),t.push(c.username),t.push(c.mobile),t.push(c.email),t.push(c.org_name),t.push(c.branch_name),t.push(c.route_name),t.push(c.trip_type),t.push(c.trip_start_time),t.push(c.trip_end_time),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=12,e.getColumn(3).width=15,e.getColumn(4).width=20,e.getColumn(5).width=15,e.getColumn(6).width=20,e.getColumn(7).width=28,e.getColumn(8).width=28,e.getColumn(9).width=18,e.getColumn(10).width=15,e.getColumn(11).width=28,e.getColumn(12).width=28,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"BusPassengersReport.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a),p.Tb(h.b))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-passengers"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(Vt,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:65,vars:6,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Organisation",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicle_number"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","passenger_name"],["matColumnDef","username"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","mobile"],["matColumnDef","email"],["matColumnDef","org_name"],["matColumnDef","branch_name"],["matColumnDef","route_name"],["matColumnDef","trip_type"],["matColumnDef","trip_start_time"],["matColumnDef","trip_end_time"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.add()})),p.Zb(17,"b"),p.Rc(18,"+ Create Passenger"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,$t,2,0,"th",19),p.Pc(26,Xt,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,Gt,2,0,"th",22),p.Pc(29,Ht,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,qt,2,0,"th",22),p.Pc(32,jt,2,1,"td",23),p.Wb(),p.Xb(33,25),p.Pc(34,Jt,2,0,"th",22),p.Pc(35,Qt,2,1,"td",26),p.Wb(),p.Xb(36,27),p.Pc(37,Kt,2,0,"th",22),p.Pc(38,te,2,1,"td",26),p.Wb(),p.Xb(39,28),p.Pc(40,ee,2,0,"th",22),p.Pc(41,ne,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,ie,2,0,"th",22),p.Pc(44,ae,2,1,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,oe,2,0,"th",22),p.Pc(47,re,2,1,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,ce,2,0,"th",22),p.Pc(50,le,2,1,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,se,2,0,"th",22),p.Pc(53,be,2,1,"td",20),p.Wb(),p.Xb(54,33),p.Pc(55,me,2,0,"th",22),p.Pc(56,de,2,1,"td",20),p.Wb(),p.Xb(57,34),p.Pc(58,ue,2,0,"th",22),p.Pc(59,ge,2,1,"td",20),p.Wb(),p.Xb(60,35),p.Pc(61,pe,2,0,"th",22),p.Pc(62,he,3,0,"td",20),p.Wb(),p.Pc(63,fe,1,0,"tr",36),p.Pc(64,_e,1,0,"tr",37),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(5,Ce)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(40),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,c.d,r.b,c.a,c.f,c.h],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();function De(t,e){1&t&&(p.Zb(0,"h4",21),p.Rc(1,"Create Route"),p.Yb())}function Te(t,e){1&t&&(p.Zb(0,"h4",21),p.Rc(1,"Edit Route"),p.Yb())}function Ye(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Organisation Name "),p.Yb())}function Pe(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Minimum 3 Letters "),p.Yb())}function Re(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,Ye,2,0,"span",12),p.Pc(2,Pe,2,0,"span",12),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.busRouteForm.controls.route_name.errors.required),p.Eb(1),p.vc("ngIf",t.busRouteForm.controls.route_name.errors.minlength)}}function ye(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",22),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().fromChangeGeofence(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.geofence_id),p.Eb(1),p.Tc(" ",t.geofence_name,"")}}function Ze(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",22),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().toChangeGeofence(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.geofence_id),p.Eb(1),p.Tc(" ",t.geofence_name,"")}}function Ee(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",22),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().changeOrg(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.bus_organisation_id),p.Eb(1),p.Tc(" ",t.org_name,"")}}function xe(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",22),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().changeBranchOrg(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.bus_organisation_branch_id),p.Eb(1),p.Tc(" ",t.branch_name,"")}}function we(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",23),p.lc("click",(function(){return p.Ic(t),p.pc().createRoute()})),p.Rc(1,"Create Route"),p.Yb()}}function ke(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",23),p.lc("click",(function(){return p.Ic(t),p.pc().createRoute()})),p.Rc(1,"Update Route"),p.Yb()}}let Me=(()=>{class t{constructor(t,e,n,i){this.uTrackService=t,this.toasterService=e,this.dialogRef=n,this.isCreateRoute=!1,this.geofence_list=[],this.to_geofence_id="",this.from_geofence_id="",this.organisation_list=[],this.branch_organisation_list=[],this.routeName="",this.bus_route_id="",this.busRouteForm=new Tt.i({route_name:new Tt.f("",[Tt.A.required,Tt.A.minLength(3)]),from_geofence_id:new Tt.f("",[Tt.A.required]),to_geofence_id:new Tt.f("",[Tt.A.required]),bus_organisation_id:new Tt.f("",[Tt.A.required]),bus_organisation_branch_id:new Tt.f("",[Tt.A.required])}),null!=i&&null!=i&&(this.routeData=JSON.parse(i.bus_route_id))}ngOnInit(){null!=this.routeData&&null!=this.routeData?(this.isCreateRoute=!1,this.bus_route_id=this.routeData.bus_route_id,this.routeName=this.routeData.route_name,this.from_geofence_id=this.routeData.from_geofence_id,this.to_geofence_id=this.routeData.to_geofence_id,this.org_name=this.routeData.bus_organisation_id,this.branch_org_name=this.routeData.bus_organisation_id,this.bus_geofence_list(),this.bus_organisation_list(),this.bus_organisation_branch_list()):(this.isCreateRoute=!0,this.bus_geofence_list(),this.bus_organisation_list(),this.bus_organisation_branch_list())}bus_geofence_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_geofence_list(t).subscribe(t=>{this.geofence_list=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.geofence_list=t.data,null==this.routeData&&null==this.routeData&&(this.from_geofence_id=this.geofence_list[0].geofence_id,this.to_geofence_id=this.geofence_list[0].geofence_id))})}bus_organisation_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_list(t).subscribe(t=>{this.organisation_list=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.organisation_list=t.data,null==this.routeData&&null==this.routeData&&(this.org_name=this.organisation_list[0].bus_organisation_id))})}bus_organisation_branch_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_branch_list(t).subscribe(t=>{t.status&&(this.branch_organisation_list=[],null!=t.data&&null!=t.data&&t.data.length>0&&(this.branch_organisation_list=t.data,null==this.routeData&&null==this.routeData&&(this.branch_org_name=this.branch_organisation_list[0].bus_organisation_branch_id)))})}changeOrg(t){this.busRouteForm.value.bus_organisation_id=t.bus_organisation_id}changeBranchOrg(t){this.busRouteForm.value.bus_organisation_branch_id=t.bus_organisation_branch_id}fromChangeGeofence(t){this.busRouteForm.value.from_geofence_id=t.geofence_id}toChangeGeofence(t){this.busRouteForm.value.to_geofence_id=t.geofence_id}createRoute(){let t=this.busRouteForm.value.route_name,e=this.busRouteForm.value.from_geofence_id,n=this.busRouteForm.value.to_geofence_id,i=this.busRouteForm.value.bus_organisation_id,a=this.busRouteForm.value.bus_organisation_branch_id;if(null!=t&&null!=t&&""!=t&&t.length>=3)if(this.isCreateRoute){const o=new FormData;o.append("user_id",localStorage.getItem("USER_ID")),o.append("route_name",t),o.append("from_geofence_id",e),o.append("to_geofence_id",n),o.append("bus_organisation_id",i),o.append("bus_organisation_branch_id",a),this.uTrackService.bus_route_create(o).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):this.toasterService.danger("Pragati Utrack",t.message)})}else{const o=new FormData;o.append("user_id",localStorage.getItem("USER_ID")),o.append("route_name",t),o.append("from_geofence_id",e),o.append("to_geofence_id",n),o.append("bus_organisation_id",i),o.append("bus_organisation_branch_id",a),o.append("bus_route_id",this.bus_route_id),this.uTrackService.bus_route_edit(o).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):this.toasterService.danger("Pragati Utrack",t.message)})}else this.toasterService.danger("Pragati Utrack","Enter Route Name")}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(u.a),p.Tb(C.cb),p.Tb(h.g),p.Tb(h.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-create-bus-route"]],decls:56,vars:15,consts:[[1,"col-md-12"],[1,"clearfix"],["style","color: blue;",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"card-body"],[1,"col-md-12",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"required"],["type","text","formControlName","route_name","onkeypress","return /[a-zA-Z0-9 _-]+/i.test(event.key)","maxlength","30","placeholder","Enter Route Name",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],[4,"ngIf"],["formControlName","from_geofence_id","placeholder","Select From Geofence",1,"form-control",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["formControlName","to_geofence_id","placeholder","Select To Geofence",1,"form-control",3,"ngModel","ngModelChange"],["formControlName","bus_organisation_id","placeholder","Select Organisation",1,"form-control",3,"ngModel","ngModelChange"],["formControlName","bus_organisation_branch_id","placeholder","Select Organisation Branch",1,"form-control",3,"ngModel","ngModelChange"],[1,"col-md-12","text-center"],["mat-dialog-close","false",1,"btn","btn-warning","btn-sm","mrl5"],["class","btn btn-primary btn-sm mrl5",3,"click",4,"ngIf"],[2,"color","blue"],[3,"value","click"],[1,"btn","btn-primary","btn-sm","mrl5",3,"click"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Pc(2,De,2,0,"h4",2),p.Pc(3,Te,2,0,"h4",2),p.Ub(4,"hr"),p.Yb(),p.Yb(),p.Zb(5,"section",3),p.Zb(6,"div",4),p.Zb(7,"div",5),p.Zb(8,"div",6),p.Zb(9,"div",7),p.Zb(10,"div",8),p.Zb(11,"div",9),p.Zb(12,"label"),p.Rc(13," Route Name "),p.Zb(14,"span",10),p.Rc(15,"*"),p.Yb(),p.Yb(),p.Zb(16,"input",11),p.lc("ngModelChange",(function(t){return e.routeName=t})),p.Yb(),p.Pc(17,Re,3,2,"mat-error",12),p.Yb(),p.Yb(),p.Zb(18,"div",8),p.Zb(19,"div",9),p.Zb(20,"label"),p.Rc(21,"From Geofence "),p.Zb(22,"span",10),p.Rc(23,"*"),p.Yb(),p.Yb(),p.Zb(24,"mat-select",13),p.lc("ngModelChange",(function(t){return e.from_geofence_id=t})),p.Pc(25,ye,2,2,"mat-option",14),p.Yb(),p.Yb(),p.Yb(),p.Zb(26,"div",8),p.Zb(27,"div",9),p.Zb(28,"label"),p.Rc(29," To Geofence "),p.Zb(30,"span",10),p.Rc(31,"*"),p.Yb(),p.Yb(),p.Zb(32,"mat-select",15),p.lc("ngModelChange",(function(t){return e.to_geofence_id=t})),p.Pc(33,Ze,2,2,"mat-option",14),p.Yb(),p.Yb(),p.Yb(),p.Zb(34,"div",8),p.Zb(35,"div",9),p.Zb(36,"label"),p.Rc(37," Bus Organisation "),p.Zb(38,"span",10),p.Rc(39,"*"),p.Yb(),p.Yb(),p.Zb(40,"mat-select",16),p.lc("ngModelChange",(function(t){return e.org_name=t})),p.Pc(41,Ee,2,2,"mat-option",14),p.Yb(),p.Yb(),p.Yb(),p.Zb(42,"div",8),p.Zb(43,"div",9),p.Zb(44,"label"),p.Rc(45,"Bus Organisation Branch "),p.Zb(46,"span",10),p.Rc(47,"*"),p.Yb(),p.Yb(),p.Zb(48,"mat-select",17),p.lc("ngModelChange",(function(t){return e.branch_org_name=t})),p.Pc(49,xe,2,2,"mat-option",14),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(50,"div",18),p.Zb(51,"div",9),p.Zb(52,"button",19),p.Rc(53,"Cancel"),p.Yb(),p.Pc(54,we,2,0,"button",20),p.Pc(55,ke,2,0,"button",20),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(2),p.vc("ngIf",e.isCreateRoute),p.Eb(1),p.vc("ngIf",!e.isCreateRoute),p.Eb(5),p.vc("formGroup",e.busRouteForm),p.Eb(8),p.vc("ngModel",e.routeName),p.Eb(1),p.vc("ngIf",e.busRouteForm.controls.route_name.errors&&e.busRouteForm.controls.route_name.touched),p.Eb(7),p.vc("ngModel",e.from_geofence_id),p.Eb(1),p.vc("ngForOf",e.geofence_list),p.Eb(7),p.vc("ngModel",e.to_geofence_id),p.Eb(1),p.vc("ngForOf",e.geofence_list),p.Eb(7),p.vc("ngModel",e.org_name),p.Eb(1),p.vc("ngForOf",e.organisation_list),p.Eb(7),p.vc("ngModel",e.branch_org_name),p.Eb(1),p.vc("ngForOf",e.branch_organisation_list),p.Eb(5),p.vc("ngIf",e.isCreateRoute),p.Eb(1),p.vc("ngIf",!e.isCreateRoute))},directives:[i.p,Tt.r,Tt.j,Tt.d,Tt.q,Tt.h,Tt.l,Yt.a,i.o,h.d,Rt.b,Pt.o],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1.25rem}.required[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{font-weight:700}.mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.model-resize-outviwe[_ngcontent-%COMP%]{margin-top:70px;max-width:650px}.model-resize[_ngcontent-%COMP%]{height:450px;width:650px;margin-left:-110px}.mrl5[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}  .mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:hidden;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}"]}),t})();const Se=["content"];function Oe(t,e){1&t&&(p.Zb(0,"th",36),p.Rc(1," ID "),p.Yb())}function Ie(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function Ne(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Route Name "),p.Yb())}function Ae(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",39),p.Zb(1,"a",40),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().route_details(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.route_name,"")}}function Fe(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," From Geofence Name "),p.Yb())}function Ue(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.from_geofence_name," ")}}function Be(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," To Geofence Name"),p.Yb())}function Le(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.to_location_name," ")}}function ze(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Organisation Name"),p.Yb())}function We(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.org_name," ")}}function Ve(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Branch Name"),p.Yb())}function $e(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.branch_name," ")}}function Xe(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Added Date & Time"),p.Yb())}function Ge(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",p.sc(2,1,t.added_date_time,"dd MMM yyyy hh:mm:ss a")," ")}}function He(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Stops Count "),p.Yb())}function qe(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.stops_count)}}function je(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Status "),p.Yb())}function Je(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.status)}}function Qe(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Edit "),p.Yb())}function Ke(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",37),p.Zb(1,"a"),p.Zb(2,"i",41),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function tn(t,e){1&t&&p.Ub(0,"tr",42)}function en(t,e){1&t&&p.Ub(0,"tr",43)}function nn(t,e){1&t&&(p.Zb(0,"div",44),p.Zb(1,"p",45),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const an=function(){return{icon:"refresh-outline",pack:"eva"}};let on=(()=>{class t{constructor(t,e,n,i){this.headerService=t,this.dialog=e,this.routes=n,this.uTrackService=i,this.ELEMENT_DATA=[],this.displayedColumns=["id","route_name","from_geofence_name","from_location_name","org_name","branch_name","added_date_time","stops_count","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Routes"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_route_list()}bus_route_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_route_list(t).subscribe(t=>{t.status&&null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.dataSource.data=this.ELEMENT_DATA,this.TableDataNotshow=!1):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_route_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}busRoute(){this.dialog.open(Me,{width:"50%"}).afterClosed().subscribe(t=>{this.bus_route_list()})}edit(t){let e=JSON.stringify(t);this.dialog.open(Me,{width:"50%",data:{bus_route_id:e}}).afterClosed().subscribe(t=>{this.bus_route_list()})}route_details(t){this.routes.navigate(["web/bus_management/bus_routes/bus_route_details",t.bus_route_id])}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.route_name),t.push(a.from_geofence_name),t.push(a.to_location_name),t.push(a.org_name),t.push(a.branch_name),t.push(b.a.getDisplayDateTime(a.added_date_time)),t.push(a.stops_count),t.push(a.status),n.push(t),i++}g.a.downloadPdf(e,["ID","Route Name","From Geofence Name","To Geofence Name","Organisation Name","Branch Name","Added Date & Time","Stops Count","Status"],n,"BusRouteReport")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Route Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Route Name","From Geofence Name","To Geofence Name","Organisation Name","Branch Name","Added Date & Time","Stops Count","Status"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.route_name),t.push(c.from_geofence_name),t.push(c.to_location_name),t.push(c.org_name),t.push(c.branch_name),t.push(b.a.getDisplayDateTime(c.added_date_time)),t.push(c.stops_count),t.push(c.status),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=20,e.getColumn(3).width=20,e.getColumn(4).width=25,e.getColumn(5).width=25,e.getColumn(6).width=25,e.getColumn(7).width=15,e.getColumn(8).width=15,e.getColumn(9).width=15,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"BusRouteReport.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(h.b),p.Tb(a.c),p.Tb(u.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-routes"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(Se,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:57,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Route",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","route_name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","from_geofence_name"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","from_location_name"],["matColumnDef","org_name"],["matColumnDef","branch_name"],["matColumnDef","added_date_time"],["matColumnDef","stops_count"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.busRoute()})),p.Zb(17,"b"),p.Rc(18,"+ Create Route"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,Oe,2,0,"th",19),p.Pc(26,Ie,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,Ne,2,0,"th",22),p.Pc(29,Ae,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,Fe,2,0,"th",22),p.Pc(32,Ue,2,1,"td",25),p.Wb(),p.Xb(33,26),p.Pc(34,Be,2,0,"th",22),p.Pc(35,Le,2,1,"td",25),p.Wb(),p.Xb(36,27),p.Pc(37,ze,2,0,"th",22),p.Pc(38,We,2,1,"td",20),p.Wb(),p.Xb(39,28),p.Pc(40,Ve,2,0,"th",22),p.Pc(41,$e,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,Xe,2,0,"th",22),p.Pc(44,Ge,3,4,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,He,2,0,"th",22),p.Pc(47,qe,2,1,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,je,2,0,"th",22),p.Pc(50,Je,2,1,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,Qe,2,0,"th",22),p.Pc(53,Ke,3,0,"td",20),p.Wb(),p.Pc(54,tn,1,0,"tr",33),p.Pc(55,en,1,0,"tr",34),p.Yb(),p.Pc(56,nn,3,0,"div",35),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,an)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(31),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],pipes:[i.e],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();var rn=n("xoCY");function cn(t,e){1&t&&(p.Zb(0,"h4",25),p.Rc(1," Create Bus Timing :"),p.Yb())}function ln(t,e){1&t&&(p.Zb(0,"h4",25),p.Rc(1," Edit Bus Timing :"),p.Yb())}function sn(t,e){if(1&t){const t=p.ac();p.Zb(0,"mat-option",26),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().routeChange(n)})),p.Rc(1),p.Yb()}if(2&t){const t=e.$implicit;p.vc("value",t.bus_route_id),p.Eb(1),p.Tc(" ",t.route_name,"")}}function bn(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",27),p.lc("click",(function(){return p.Ic(t),p.pc().createTimingRoute()})),p.Rc(1,"Create Timing Route"),p.Yb()}}function mn(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",27),p.lc("click",(function(){return p.Ic(t),p.pc().createTimingRoute()})),p.Rc(1,"Update Timing Route"),p.Yb()}}let dn=(()=>{class t{constructor(t,e,n,i){this.uTrackService=t,this.toaster=e,this.dialogRef=n,this.currentDate=new Date,this.startDate=new Date((new Date).getTime()-864e5),this.endtDate=new Date,this.route_list=[],this.bus_route_id="",this.isCreateRoute=!0,this.trip_type="Drop",this.busTimingRouteForm=new Tt.i({bus_route_id:new Tt.f("",[Tt.A.required]),trip_start_time:new Tt.f("",[Tt.A.required]),trip_end_time:new Tt.f("",[Tt.A.required]),trip_type:new Tt.f("",[Tt.A.required])}),null!=i&&null!=i&&(this.timingRouteData=JSON.parse(i.bus_route_timing_id))}ngOnInit(){null!=this.timingRouteData&&null!=this.timingRouteData?(this.isCreateRoute=!1,this.startDate=new Date(b.a.timeToDate(new Date)+"T"+this.timingRouteData.trip_start_time),this.endtDate=new Date(b.a.timeToDate(new Date)+"T"+this.timingRouteData.trip_end_time),this.trip_type=this.timingRouteData.trip_type,this.bus_route_id=this.timingRouteData.bus_route_id,this.bus_route_timing_id=this.timingRouteData.bus_route_timing_id,this.bus_route_list()):(this.isCreateRoute=!0,this.startDate=new Date((new Date).getTime()-864e5),this.endtDate=new Date,this.trip_type="Drop",this.bus_route_id="",this.bus_route_list())}bus_route_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_route_list(t).subscribe(t=>{this.route_list=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0&&(this.route_list=t.data,null==this.timingRouteData&&null==this.timingRouteData&&(this.bus_route_id=this.route_list[0].bus_route_id))})}routeChange(t){}createTimingRoute(){if(this.isCreateRoute){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),t.append("bus_route_id",this.busTimingRouteForm.value.bus_route_id),t.append("trip_start_time",b.a.getServerTime(this.busTimingRouteForm.value.trip_start_time)),t.append("trip_end_time",b.a.getServerTime(this.busTimingRouteForm.value.trip_end_time)),t.append("trip_type",this.busTimingRouteForm.value.trip_type),this.uTrackService.bus_route_timing_create(t).subscribe(t=>{t.status?(this.toaster.success("Pragati Utrack",t.message),this.dialogRef.close()):(this.toaster.danger("Pragati Utrack",t.message),this.dialogRef.close())})}else{const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),t.append("bus_route_id",this.busTimingRouteForm.value.bus_route_id),t.append("trip_start_time",b.a.getServerTime(this.busTimingRouteForm.value.trip_start_time)),t.append("trip_end_time",b.a.getServerTime(this.busTimingRouteForm.value.trip_end_time)),t.append("trip_type",this.busTimingRouteForm.value.trip_type),t.append("bus_route_timing_id",this.bus_route_timing_id),this.uTrackService.bus_route_timing_edit(t).subscribe(t=>{t.status?(this.toaster.success("Pragati Utrack",t.message),this.dialogRef.close()):(this.toaster.danger("Pragati Utrack",t.message),this.dialogRef.close())})}}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(u.a),p.Tb(C.cb),p.Tb(h.g),p.Tb(h.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-create-bus-timing"]],decls:56,vars:16,consts:[[1,"col-md-12"],["style","color: blue;",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"card-body"],[1,"col-md-12",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"required"],["formControlName","bus_route_id","placeholder","Select To Route",1,"form-control",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],[1,"no-line"],["formControlName","trip_start_time","matInput","",1,"form-control","datepicker",3,"ngModel","max","matDatetimepicker","ngModelChange"],["matSuffix","",3,"for"],["type","time","openOnFocus","true","timeInterval","1"],["stateDatepicker",""],["formControlName","trip_end_time","matInput","",1,"form-control","datepicker",3,"ngModel","max","matDatetimepicker","ngModelChange"],["endDatepicker",""],["formControlName","trip_type",1,"form-control",3,"ngModel","ngModelChange"],["value","Drop"],["value","Pickup"],[1,"col-md-12","text-center"],["mat-dialog-close","false",1,"btn","btn-warning","btn-sm","mrl5"],["class","btn btn-primary btn-sm mrl5",3,"click",4,"ngIf"],[2,"color","blue"],[3,"value","click"],[1,"btn","btn-primary","btn-sm","mrl5",3,"click"]],template:function(t,e){if(1&t&&(p.Zb(0,"mat-dialog-actions"),p.Zb(1,"div",0),p.Pc(2,cn,2,0,"h4",1),p.Pc(3,ln,2,0,"h4",1),p.Ub(4,"hr"),p.Yb(),p.Ub(5,"hr"),p.Zb(6,"section",2),p.Zb(7,"div",3),p.Zb(8,"div",4),p.Zb(9,"div",5),p.Zb(10,"div",6),p.Zb(11,"div",7),p.Zb(12,"div",8),p.Zb(13,"label"),p.Rc(14," Bus Route "),p.Zb(15,"span",9),p.Rc(16,"*"),p.Yb(),p.Yb(),p.Zb(17,"mat-select",10),p.lc("ngModelChange",(function(t){return e.bus_route_id=t})),p.Pc(18,sn,2,2,"mat-option",11),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div",7),p.Zb(20,"div",8),p.Zb(21,"label"),p.Rc(22,"Start Time "),p.Yb(),p.Ub(23,"br"),p.Zb(24,"mat-form-field",12),p.Zb(25,"input",13),p.lc("ngModelChange",(function(t){return e.startDate=t})),p.Yb(),p.Ub(26,"mat-datetimepicker-toggle",14),p.Ub(27,"mat-datetimepicker",15,16),p.Yb(),p.Yb(),p.Yb(),p.Zb(29,"div",7),p.Zb(30,"div",8),p.Zb(31,"label"),p.Rc(32,"End Time "),p.Yb(),p.Ub(33,"br"),p.Zb(34,"mat-form-field",12),p.Zb(35,"input",17),p.lc("ngModelChange",(function(t){return e.endtDate=t})),p.Yb(),p.Ub(36,"mat-datetimepicker-toggle",14),p.Ub(37,"mat-datetimepicker",15,18),p.Yb(),p.Yb(),p.Yb(),p.Zb(39,"div",7),p.Zb(40,"div",8),p.Zb(41,"label"),p.Rc(42," Trip Type "),p.Zb(43,"span",9),p.Rc(44,"*"),p.Yb(),p.Yb(),p.Zb(45,"mat-select",19),p.lc("ngModelChange",(function(t){return e.trip_type=t})),p.Zb(46,"mat-option",20),p.Rc(47,"Drop"),p.Yb(),p.Zb(48,"mat-option",21),p.Rc(49,"Pick Up"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(50,"div",22),p.Zb(51,"div",8),p.Zb(52,"button",23),p.Rc(53,"Cancel"),p.Yb(),p.Pc(54,bn,2,0,"button",24),p.Pc(55,mn,2,0,"button",24),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t){const t=p.Ec(28),n=p.Ec(38);p.Eb(2),p.vc("ngIf",e.isCreateRoute),p.Eb(1),p.vc("ngIf",!e.isCreateRoute),p.Eb(6),p.vc("formGroup",e.busTimingRouteForm),p.Eb(8),p.vc("ngModel",e.bus_route_id),p.Eb(1),p.vc("ngForOf",e.route_list),p.Eb(7),p.vc("ngModel",e.startDate)("max",e.currentDate)("matDatetimepicker",t),p.Eb(1),p.vc("for",t),p.Eb(9),p.vc("ngModel",e.endtDate)("max",e.currentDate)("matDatetimepicker",n),p.Eb(1),p.vc("for",n),p.Eb(9),p.vc("ngModel",e.trip_type),p.Eb(9),p.vc("ngIf",e.isCreateRoute),p.Eb(1),p.vc("ngIf",!e.isCreateRoute)}},directives:[h.c,i.p,Tt.r,Tt.j,Yt.a,Tt.q,Tt.h,i.o,Rt.c,Tt.d,f.b,rn.b,rn.d,Rt.g,rn.a,Pt.o,h.d],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1.25rem}.mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.mrl5[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}  .mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:hidden;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}  .no-line1 .mat-form-field-underline,   .no-line .mat-form-field-underline{display:none}input#mat-input-1[_ngcontent-%COMP%], input#mat-input-2[_ngcontent-%COMP%]{height:36px;background-color:#fff!important;border:1px solid #ced4da}.mat-label[_ngcontent-%COMP%]{font-weight:5px}  .mat-form-field{width:100%!important}  .mat-form-field .form-control{border:1px solid #ccc;background-color:#fff;padding:13px}.required[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{font-weight:700}  .mat-form-field, label[_ngcontent-%COMP%]{color:#464646!important}  .mat-datetimepicker-content{background-color:#fff!important;border-radius:15px!important;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12);overflow:hidden!important}  .mat-datetimepicker-calendar[mode=auto]   .mat-datetimepicker-calendar-header{background-color:#4d5ec1}  .mat-datetimepicker-calendar-body-cell-content.mat-datetimepicker-calendar-body-selected{background-color:#3f51b5;color:#fff}  .mat-form-field{display:inline-block;position:relative;text-align:left;margin-top:-19px}  .mat-datetimepicker-clock-hand{background-color:#3f51b5}  .mat-datetimepicker-clock[_ngcontent-c8]{position:relative;width:100%;height:0;padding-top:100%;background-color:#e0e0e0;border-radius:50%}  .mat-datetimepicker-clock-cell.mat-datetimepicker-clock-cell-selected,   .mat-datetimepicker-clock-center{background-color:#4d5ec1}  .mat-form-field-prefix,   .mat-form-field-suffix{white-space:nowrap;flex:none;position:relative;background:#007bff!important;padding:0 2px 2px 0;color:#fff;font-size:20px}"]}),t})();const un=["content"];function gn(t,e){1&t&&(p.Zb(0,"th",32),p.Rc(1," ID "),p.Yb())}function pn(t,e){if(1&t&&(p.Zb(0,"td",33),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function hn(t,e){1&t&&(p.Zb(0,"th",34),p.Rc(1," Route Name "),p.Yb())}function fn(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",35),p.Zb(1,"a",36),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().route_detail(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.route_name,"")}}function _n(t,e){1&t&&(p.Zb(0,"th",34),p.Rc(1," Trip Type "),p.Yb())}function Cn(t,e){if(1&t&&(p.Zb(0,"td",35),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_type," ")}}function vn(t,e){1&t&&(p.Zb(0,"th",34),p.Rc(1," Trip Start Time"),p.Yb())}function Dn(t,e){if(1&t&&(p.Zb(0,"td",35),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_start_time," ")}}function Tn(t,e){1&t&&(p.Zb(0,"th",34),p.Rc(1," Trip End Time "),p.Yb())}function Yn(t,e){if(1&t&&(p.Zb(0,"td",33),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_end_time," ")}}function Pn(t,e){1&t&&(p.Zb(0,"th",34),p.Rc(1," Edit "),p.Yb())}function Rn(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",33),p.Zb(1,"a"),p.Zb(2,"i",37),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function yn(t,e){1&t&&p.Ub(0,"tr",38)}function Zn(t,e){1&t&&p.Ub(0,"tr",39)}function En(t,e){1&t&&(p.Zb(0,"div",40),p.Zb(1,"p",41),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const xn=function(){return{icon:"refresh-outline",pack:"eva"}};let wn=(()=>{class t{constructor(t,e,n,i){this.headerService=t,this.uTrackService=e,this.routes=n,this.dialog=i,this.TableDataNotshow=!1,this.ELEMENT_DATA=[],this.displayedColumns=["id","route_name","trip_type","trip_start_time","trip_end_time","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Timings"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_route_timing_list()}bus_route_timing_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_route_timing_list(t).subscribe(t=>{this.ELEMENT_DATA=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.dataSource.data=this.ELEMENT_DATA,this.TableDataNotshow=!1):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_route_timing_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}createBusTimig(){this.dialog.open(dn,{width:"50%"}).afterClosed().subscribe(t=>{this.bus_route_timing_list()})}edit(t){let e=JSON.stringify(t);this.dialog.open(dn,{width:"50%",data:{bus_route_timing_id:e}}).afterClosed().subscribe(t=>{this.bus_route_timing_list()})}route_detail(t){this.routes.navigate(["web/bus_management/bus_timings/bus_timing_details",t.bus_route_timing_id]),localStorage.setItem("TIMING_DETAILS",JSON.stringify(t))}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.route_name),t.push(a.trip_type),t.push(a.trip_start_time),t.push(a.trip_end_time),n.push(t),i++}g.a.downloadPdf(e,["ID","Route Name","Trip Type","Trip Start Time","Trip End Time"],n,"BusTimingReport")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Timing Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Route Name","Trip Type","Trip Start Time","Trip End Time"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.route_name),t.push(c.trip_type),t.push(c.trip_start_time),t.push(c.trip_end_time),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=20,e.getColumn(3).width=20,e.getColumn(4).width=35,e.getColumn(5).width=35,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"BusTimingReport.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a),p.Tb(a.c),p.Tb(h.b))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-timings"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(un,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:45,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Timing",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","route_name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","trip_type"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","trip_start_time"],["matColumnDef","trip_end_time"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.createBusTimig()})),p.Zb(17,"b"),p.Rc(18,"+ Create Bus Timing"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,gn,2,0,"th",19),p.Pc(26,pn,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,hn,2,0,"th",22),p.Pc(29,fn,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,_n,2,0,"th",22),p.Pc(32,Cn,2,1,"td",25),p.Wb(),p.Xb(33,26),p.Pc(34,vn,2,0,"th",22),p.Pc(35,Dn,2,1,"td",25),p.Wb(),p.Xb(36,27),p.Pc(37,Tn,2,0,"th",22),p.Pc(38,Yn,2,1,"td",20),p.Wb(),p.Xb(39,28),p.Pc(40,Pn,2,0,"th",22),p.Pc(41,Rn,3,0,"td",20),p.Wb(),p.Pc(42,yn,1,0,"tr",29),p.Pc(43,Zn,1,0,"tr",30),p.Yb(),p.Pc(44,En,3,0,"div",31),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,xn)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(19),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}label[_ngcontent-%COMP%]{font-size:13px;font-weight:700;margin-bottom:6px}.auto-width[_ngcontent-%COMP%]{margin:0;padding:0 0 0 16px;float:left}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();const kn=["content"];function Mn(t,e){1&t&&(p.Zb(0,"th",33),p.Rc(1," ID "),p.Yb())}function Sn(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function On(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Vehicle Number "),p.Yb())}function In(t,e){if(1&t&&(p.Zb(0,"td",36),p.Zb(1,"a",37),p.Rc(2),p.Yb(),p.Yb()),2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.vehicle_number,"")}}function Nn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Organisation Name "),p.Yb())}function An(t,e){if(1&t&&(p.Zb(0,"td",36),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.org_name," ")}}function Fn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Branch Name "),p.Yb())}function Un(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.branch_name)}}function Bn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Route Name "),p.Yb())}function Ln(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.route_name)}}function zn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Trip Type "),p.Yb())}function Wn(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.trip_type)}}function Vn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Trip Start Time"),p.Yb())}function $n(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_start_time," ")}}function Xn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Trip End Time"),p.Yb())}function Gn(t,e){if(1&t&&(p.Zb(0,"td",34),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.trip_end_time," ")}}function Hn(t,e){1&t&&(p.Zb(0,"th",35),p.Rc(1," Edit "),p.Yb())}function qn(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",34),p.Zb(1,"a"),p.Zb(2,"i",38),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function jn(t,e){1&t&&p.Ub(0,"tr",39)}function Jn(t,e){1&t&&p.Ub(0,"tr",40)}const Qn=function(){return{icon:"refresh-outline",pack:"eva"}};let Kn=(()=>{class t{constructor(t,e){this.headerService=t,this.uTrackService=e,this.ELEMENT_DATA=[],this.displayedColumns=["id","vehicle_number","org_name","branch_name","route_name","trip_type","trip_start_time","trip_end_time","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Trips"),this.bus_trip_list()}bus_trip_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),t.append("bus_route_id","1"),t.append("bus_organisation_branch_id","2"),t.append("bus_organisation_id","1"),this.uTrackService.bus_trip_list(t).subscribe(t=>{t.status?(this.ELEMENT_DATA=[],null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.TableDataNotshow=!1,this.dataSource.data=this.ELEMENT_DATA):this.TableDataNotshow=!0):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_trip_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}add(){}edit(t){}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Trip Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.vehicle_number),t.push(a.org_name),t.push(a.branch_name),t.push(a.route_name),t.push(a.trip_type),t.push(a.trip_start_time),t.push(a.trip_end_time),n.push(t),i++}g.a.downloadPdf(e,["ID","Vehicle Number","Organisation Name","Branch Name","Route Name","Trip Type","Trip Start Time","Trip End Time"],n,"BusTripReport")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Trip Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Vehicle Number","Passenger Name","Username","Mobile","Email","Organisation Name","Branch Name","Route Name","Trip Type","Trip Start Time","Trip End Time"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.vehicle_number),t.push(c.org_name),t.push(c.branch_name),t.push(c.route_name),t.push(c.trip_type),t.push(c.trip_start_time),t.push(c.trip_end_time),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=12,e.getColumn(3).width=25,e.getColumn(4).width=20,e.getColumn(5).width=25,e.getColumn(6).width=20,e.getColumn(7).width=28,e.getColumn(8).width=28,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"BusTripReport.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-bus-trips"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(kn,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:53,vars:6,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Trip",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicle_number"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","org_name"],["matColumnDef","branch_name"],["matColumnDef","route_name"],["matColumnDef","trip_type"],["matColumnDef","trip_start_time"],["matColumnDef","trip_end_time"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.add()})),p.Zb(17,"b"),p.Rc(18,"+ Create Trip"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,Mn,2,0,"th",19),p.Pc(26,Sn,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,On,2,0,"th",22),p.Pc(29,In,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,Nn,2,0,"th",22),p.Pc(32,An,2,1,"td",23),p.Wb(),p.Xb(33,25),p.Pc(34,Fn,2,0,"th",22),p.Pc(35,Un,2,1,"td",20),p.Wb(),p.Xb(36,26),p.Pc(37,Bn,2,0,"th",22),p.Pc(38,Ln,2,1,"td",20),p.Wb(),p.Xb(39,27),p.Pc(40,zn,2,0,"th",22),p.Pc(41,Wn,2,1,"td",20),p.Wb(),p.Xb(42,28),p.Pc(43,Vn,2,0,"th",22),p.Pc(44,$n,2,1,"td",20),p.Wb(),p.Xb(45,29),p.Pc(46,Xn,2,0,"th",22),p.Pc(47,Gn,2,1,"td",20),p.Wb(),p.Xb(48,30),p.Pc(49,Hn,2,0,"th",22),p.Pc(50,qn,3,0,"td",20),p.Wb(),p.Pc(51,jn,1,0,"tr",31),p.Pc(52,Jn,1,0,"tr",32),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(5,Qn)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(28),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,c.d,r.b,c.a,c.f,c.h],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();const ti=["content"];function ei(t,e){1&t&&(p.Zb(0,"th",36),p.Rc(1," ID "),p.Yb())}function ni(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function ii(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Name "),p.Yb())}function ai(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",39),p.Zb(1,"a",40),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().editCustomer(n.customer_id)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.full_name,"")}}function oi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Logo Image "),p.Yb())}function ri(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.mobile," ")}}function ci(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Type "),p.Yb())}function li(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.email," ")}}function si(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Bus Visibility"),p.Yb())}function bi(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.company_name," ")}}function mi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Track History Visibility "),p.Yb())}function di(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.gst_number," ")}}function ui(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Added By Id "),p.Yb())}function gi(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.state," ")}}function pi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Added Date & Time"),p.Yb())}function hi(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",p.sc(2,1,t.added_date,"dd/MMM/yyyy")," ")}}function fi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Updated Date & Time "),p.Yb())}function _i(t,e){1&t&&p.Ub(0,"td",37)}function Ci(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Status "),p.Yb())}function vi(t,e){1&t&&p.Ub(0,"td",37)}function Di(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Edit "),p.Yb())}function Ti(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",37),p.Zb(1,"a"),p.Zb(2,"i",41),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function Yi(t,e){1&t&&p.Ub(0,"tr",42)}function Pi(t,e){1&t&&p.Ub(0,"tr",43)}const Ri=function(){return{icon:"refresh-outline",pack:"eva"}};let yi=(()=>{class t{constructor(t){this.headerService=t,this.ELEMENT_DATA=[],this.displayedColumns=["id","name","logo_image","type","bus_visibility","track_history_visibility","added_by_id","added_date_time","updated_date_time","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Buses")}fetchDataFromApi(){}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.fetchDataFromApi())}refresh(){this.fetchDataFromApi()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.fetchDataFromApi()}back(){}add(){}edit(t){}editCustomer(t){}downloadPDF(){}Exportexcle(){}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-buses"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(ti,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:59,vars:6,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Organisation",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","logo_image"],["matColumnDef","type"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","bus_visibility"],["matColumnDef","track_history_visibility"],["matColumnDef","added_by_id"],["matColumnDef","added_date_time"],["matColumnDef","updated_date_time"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.add()})),p.Zb(17,"b"),p.Rc(18,"+ Create Organisation"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,ei,2,0,"th",19),p.Pc(26,ni,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,ii,2,0,"th",22),p.Pc(29,ai,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,oi,2,0,"th",22),p.Pc(32,ri,2,1,"td",23),p.Wb(),p.Xb(33,25),p.Pc(34,ci,2,0,"th",22),p.Pc(35,li,2,1,"td",26),p.Wb(),p.Xb(36,27),p.Pc(37,si,2,0,"th",22),p.Pc(38,bi,2,1,"td",26),p.Wb(),p.Xb(39,28),p.Pc(40,mi,2,0,"th",22),p.Pc(41,di,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,ui,2,0,"th",22),p.Pc(44,gi,2,1,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,pi,2,0,"th",22),p.Pc(47,hi,3,4,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,fi,2,0,"th",22),p.Pc(50,_i,1,0,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,Ci,2,0,"th",22),p.Pc(53,vi,1,0,"td",20),p.Wb(),p.Xb(54,33),p.Pc(55,Di,2,0,"th",22),p.Pc(56,Ti,3,0,"td",20),p.Wb(),p.Pc(57,Yi,1,0,"tr",34),p.Pc(58,Pi,1,0,"tr",35),p.Yb(),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(5,Ri)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(34),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,c.d,r.b,c.a,c.f,c.h],pipes:[i.e],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();const Zi=["content"];function Ei(t,e){1&t&&(p.Zb(0,"th",36),p.Rc(1," ID "),p.Yb())}function xi(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function wi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Profile Image "),p.Yb())}function ki(t,e){if(1&t&&(p.Zb(0,"td",37),p.Ub(1,"img",39),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.wc("src",t.profile_image,p.Kc)}}function Mi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Full Name "),p.Yb())}function Si(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",40),p.Zb(1,"a",41),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Uc(" ",t.first_name," ",t.last_name,"")}}function Oi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Mobile "),p.Yb())}function Ii(t,e){if(1&t&&(p.Zb(0,"td",40),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.mobile," ")}}function Ni(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Email "),p.Yb())}function Ai(t,e){if(1&t&&(p.Zb(0,"td",40),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.email," ")}}function Fi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Organisation Role"),p.Yb())}function Ui(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.bus_organisation_role)}}function Bi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Organisation Name"),p.Yb())}function Li(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.org_name)}}function zi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Branch Name"),p.Yb())}function Wi(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.branch_name)}}function Vi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Status "),p.Yb())}function $i(t,e){1&t&&p.Ub(0,"td",37)}function Xi(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Edit "),p.Yb())}function Gi(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",37),p.Zb(1,"a"),p.Zb(2,"i",42),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().edit(n)})),p.Yb(),p.Yb(),p.Yb()}}function Hi(t,e){1&t&&p.Ub(0,"tr",43)}function qi(t,e){1&t&&p.Ub(0,"tr",44)}function ji(t,e){1&t&&(p.Zb(0,"div",45),p.Zb(1,"p",46),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const Ji=function(){return{icon:"refresh-outline",pack:"eva"}};let Qi=(()=>{class t{constructor(t,e,n){this.headerService=t,this.uTrackService=e,this.routes=n,this.ELEMENT_DATA=[],this.displayedColumns=["id","profile_image","full_name","mobile","email","bus_organisation_role","org_name","branch_name","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.filterValue=""}ngOnInit(){this.headerService.updateHeaderTitle("Employees"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_staff_list()}bus_staff_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_staff_list(t).subscribe(t=>{this.ELEMENT_DATA=[],t.status&&null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.dataSource.data=this.ELEMENT_DATA,this.TableDataNotshow=!1):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_staff_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}createEmployee(){this.routes.navigate(["web/bus_management/employees/create_employee"])}edit(t){}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Bus Employees Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.first_name+""+a.last_name),t.push(a.mobile),t.push(a.email),t.push(a.bus_organisation_role),t.push(a.org_name),t.push(a.branch_name),t.push(a.status),n.push(t),i++}g.a.downloadPdf(e,["ID","Full Name","Mobile","Email","Organisation Role","Organisation Name","Branch Name","Status"],n,"EmployeesList")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Bus Employees Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Full Name","Mobile","Email","Organisation Role","Organisation Name","Branch Name","Status"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.first_name+""+c.last_name),t.push(c.mobile),t.push(c.email),t.push(c.bus_organisation_role),t.push(c.org_name),t.push(c.branch_name),t.push(c.status),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=40,e.getColumn(3).width=15,e.getColumn(4).width=25,e.getColumn(5).width=25,e.getColumn(6).width=35,e.getColumn(7).width=35,e.getColumn(8).width=15,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"EmployeesList.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a),p.Tb(a.c))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-employees"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(Zi,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:57,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Employee",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","profile_image"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","full_name"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","mobile"],["matColumnDef","email"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","bus_organisation_role"],["matColumnDef","org_name"],["matColumnDef","branch_name"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],[1,"img-circle",3,"src"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.createEmployee()})),p.Zb(17,"b"),p.Rc(18,"+ Create Employee"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,Ei,2,0,"th",19),p.Pc(26,xi,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,wi,2,0,"th",22),p.Pc(29,ki,2,1,"td",20),p.Wb(),p.Xb(30,23),p.Pc(31,Mi,2,0,"th",22),p.Pc(32,Si,3,2,"td",24),p.Wb(),p.Xb(33,25),p.Pc(34,Oi,2,0,"th",22),p.Pc(35,Ii,2,1,"td",24),p.Wb(),p.Xb(36,26),p.Pc(37,Ni,2,0,"th",22),p.Pc(38,Ai,2,1,"td",27),p.Wb(),p.Xb(39,28),p.Pc(40,Fi,2,0,"th",22),p.Pc(41,Ui,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,Bi,2,0,"th",22),p.Pc(44,Li,2,1,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,zi,2,0,"th",22),p.Pc(47,Wi,2,1,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,Vi,2,0,"th",22),p.Pc(50,$i,1,0,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,Xi,2,0,"th",22),p.Pc(53,Gi,3,0,"td",20),p.Wb(),p.Pc(54,Hi,1,0,"tr",33),p.Pc(55,qi,1,0,"tr",34),p.Yb(),p.Pc(56,ji,3,0,"div",35),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,Ji)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(31),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.img-circle[_ngcontent-%COMP%]{border-radius:50%!important;overflow:hidden;width:65px;height:65px;border:2px solid #1654c0;margin:0 auto 20px}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})();var Ki=n("1kSV"),ta=n("rIor");function ea(t,e){1&t&&(p.Zb(0,"h4",35),p.Rc(1," Create Organisation :"),p.Yb())}function na(t,e){1&t&&(p.Zb(0,"h4",35),p.Rc(1," Edit Organisation :"),p.Yb())}function ia(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Organisation Name "),p.Yb())}function aa(t,e){1&t&&(p.Zb(0,"span"),p.Rc(1," Enter Minimum 3 Letters "),p.Yb())}function oa(t,e){if(1&t&&(p.Zb(0,"mat-error"),p.Pc(1,ia,2,0,"span",12),p.Pc(2,aa,2,0,"span",12),p.Yb()),2&t){const t=p.pc();p.Eb(1),p.vc("ngIf",t.organisationForm.controls.org_name.errors.required),p.Eb(1),p.vc("ngIf",t.organisationForm.controls.org_name.errors.minlength)}}function ra(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",36),p.lc("click",(function(){return p.Ic(t),p.pc().createOrg()})),p.Rc(1,"Create Organisation"),p.Yb()}}function ca(t,e){if(1&t){const t=p.ac();p.Zb(0,"button",36),p.lc("click",(function(){return p.Ic(t),p.pc().createOrg()})),p.Rc(1,"Update Organisation"),p.Yb()}}function la(t,e){if(1&t){const t=p.ac();p.Zb(0,"div",37),p.Zb(1,"div",38),p.Zb(2,"p",39),p.Zb(3,"b"),p.Rc(4," Crop Image"),p.Yb(),p.Yb(),p.Zb(5,"button",40),p.lc("click",(function(){return e.$implicit.dismiss("Cross click")})),p.Rc(6,"\xd7"),p.Yb(),p.Yb(),p.Zb(7,"div",41),p.Zb(8,"div",7),p.Zb(9,"div",42),p.Zb(10,"h4",43),p.Zb(11,"b"),p.Rc(12," Crop Image"),p.Yb(),p.Yb(),p.Zb(13,"div",44),p.Zb(14,"image-cropper",45),p.lc("imageCropped",(function(e){return p.Ic(t),p.pc().imageCropped(e)})),p.Yb(),p.Yb(),p.Yb(),p.Zb(15,"div",46),p.Zb(16,"h4",47),p.Zb(17,"b"),p.Rc(18," Preview Image"),p.Yb(),p.Yb(),p.Ub(19,"img",48),p.Yb(),p.Yb(),p.Yb(),p.Zb(20,"div",49),p.Zb(21,"button",50),p.lc("click",(function(){return e.$implicit.dismiss("Cross click")})),p.Rc(22,"Cancel"),p.Yb(),p.Zb(23,"button",51),p.lc("click",(function(){return p.Ic(t),p.pc().croperimage()})),p.Rc(24,"Update"),p.Yb(),p.Yb(),p.Yb()}if(2&t){const t=p.pc();p.Eb(14),p.vc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!1)("aspectRatio",1),p.Eb(5),p.vc("src",t.croppedImage,p.Kc)}}let sa=(()=>{class t{constructor(t,e,n,i,a){this.uTrackService=e,this.modalService=n,this.toasterService=i,this.dialogRef=a,this.orgType="School",this.busVisibility="Only_Assigned",this.trackHistVisibility="All_Time",this.statusType="Active",this.isCreateOrganisation=!0,this.imageChangedEvent="",this.croppedImage="",this.org_logo_image="assets/Default_Document.png",this.organisationForm=new Tt.i({org_name:new Tt.f("",[Tt.A.required,Tt.A.minLength(3)]),org_type:new Tt.f("",[Tt.A.required]),bus_visibility:new Tt.f("",[Tt.A.required]),trh_visibility:new Tt.f("",[Tt.A.required]),status:new Tt.f("",[Tt.A.required]),fileData:new Tt.f("",[Tt.A.required])}),null!=t&&(this.organisationData=JSON.parse(t.bus_organisation_id))}ngOnInit(){null!=this.organisationData&&null!=this.organisationData?(this.isCreateOrganisation=!1,this.bus_organisation_id=this.organisationData.bus_organisation_id,this.orgName=this.organisationData.org_name,this.orgType=this.organisationData.org_type,this.busVisibility=this.organisationData.bus_visibility,this.trackHistVisibility=this.organisationData.track_history_visibility,this.statusType=this.organisationData.status,this.org_logo_image=this.organisationData.logo_image):(this.isCreateOrganisation=!0,this.orgName="",this.orgType="School",this.busVisibility="Only_Assigned",this.trackHistVisibility="All_Time",this.statusType="Active",this.org_logo_image="assets/Default_Document.png")}uploadServiceImage(t,e){this.modalService.open(e),this.imageChangedEvent=t}imageCropped(t){return this.croppedImage=t.base64,this.org_logo_Image_file=this.Userbase64ToFile(t.base64,this.imageChangedEvent.target.files[0].name),this.org_logo_Image_file}Userbase64ToFile(t,e){const n=t.split(","),i=n[0].match(/:(.*?);/)[1],a=atob(n[1]);let o=a.length,r=new Uint8Array(o);for(;o--;)r[o]=a.charCodeAt(o);return new File([r],e,{type:i})}croperimage(){this.org_logo_image=this.croppedImage,this.modalService.dismissAll("Closed")}createOrg(){let t=this.organisationForm.value.org_name,e=this.organisationForm.value.org_type,n=this.organisationForm.value.bus_visibility,i=this.organisationForm.value.trh_visibility,a=this.organisationForm.value.status;if(null!=t&&null!=t&&""!=t&&null!=e&&null!=e&&""!=e&&null!=n&&null!=n&&""!=n&&null!=i&&null!=i&&""!=i&&null!=a&&null!=a&&""!=a)if(this.isCreateOrganisation){const o=new FormData;o.append("user_id",localStorage.getItem("USER_ID")),o.append("device_token","Web"),o.append("user_type",localStorage.getItem("USER_TYPE")),o.append("org_name",t),o.append("org_type",e),o.append("bus_visibility",n),o.append("track_history_visibility",i),o.append("status",a),null!=this.org_logo_Image_file&&null!=this.org_logo_Image_file&&o.append("logo_image",this.org_logo_Image_file,this.org_logo_Image_file.name),this.uTrackService.bus_organisation_create(o).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):(this.toasterService.danger("Pragati Utrack",t.message),this.dialogRef.close())})}else{const o=new FormData;o.append("user_id",localStorage.getItem("USER_ID")),o.append("device_token","Web"),o.append("user_type",localStorage.getItem("USER_TYPE")),o.append("org_name",t),o.append("org_type",e),o.append("bus_visibility",n),o.append("track_history_visibility",i),o.append("status",a),o.append("bus_organisation_id",this.bus_organisation_id),null!=this.org_logo_Image_file&&null!=this.org_logo_Image_file&&o.append("logo_image",this.org_logo_Image_file,this.org_logo_Image_file.name),this.uTrackService.bus_organisation_update(o).subscribe(t=>{t.status?(this.toasterService.success("Pragati Utrack",t.message),this.dialogRef.close()):(this.toasterService.danger("Pragati Utrack",t.message),this.dialogRef.close())})}else this.toasterService.danger("Pragati Utrack","Please Fill All Mandatory Fields")}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(h.a),p.Tb(u.a),p.Tb(Ki.a),p.Tb(C.cb),p.Tb(h.g))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-create-organisation"]],decls:85,vars:12,consts:[[1,"col-md-12"],["mat-dialog-close","false","nbTooltip","Close","nbTooltipStatus","info",1,"fa","fa-times-circle",2,"font-size","30px","right","338px","position","fixed","top","30px"],["style","color: blue;",4,"ngIf"],[1,"content"],[1,"container-fluid"],[1,"card-body"],[1,"col-md-12",3,"formGroup"],[1,"row"],[1,"col-md-6"],[1,"form-group"],[1,"required"],["type","text","formControlName","org_name","onkeypress","return /[a-z]/i.test(event.key)","maxlength","30","placeholder","Enter Organisation Name",1,"form-control",2,"text-transform","capitalize",3,"ngModel","ngModelChange"],[4,"ngIf"],["formControlName","org_type",1,"form-control",3,"ngModel","ngModelChange"],["value","School"],["value","College"],["value","Company"],["value","Other"],["formControlName","bus_visibility",1,"form-control",3,"ngModel","ngModelChange"],["value","Only_Assigned"],["value","All"],["formControlName","trh_visibility",1,"form-control",3,"ngModel","ngModelChange"],["value","All_Time"],["value","Specific_Time"],["formControlName","status",1,"form-control",3,"ngModel","ngModelChange"],["value","Active"],["value","Inactive"],["formControlName","fileData","accept","image/*","type","file","id","myfile","name","myfile",1,"btn",3,"change"],[1,"image-preview","mb-3","ng-star-inserted",2,"margin-top","10px"],["height","105","width","105",3,"src"],[1,"col-md-12","text-center"],["mat-dialog-close","false",1,"btn","btn-warning","btn-sm","mrl5"],["class","btn btn-primary btn-sm mrl5",3,"click",4,"ngIf"],[1,"container"],["cropperModal",""],[2,"color","blue"],[1,"btn","btn-primary","btn-sm","mrl5",3,"click"],[1,"modal-content","model-resize"],[1,"modal-header"],[2,"font-size","24px"],["type","button","x","",3,"click"],[1,"modal-body"],[1,"text-center","col-md-8"],[2,"margin-left","-44px"],[2,"height","236px","width","466px"],["format","png",1,"imgcrop",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped"],[1,"text-center","col-md-4"],[2,"margin-left","-50px"],["height","180","width","200",2,"margin-left","-44px",3,"src"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(t,e){if(1&t){const t=p.ac();p.Zb(0,"div",0),p.Ub(1,"i",1),p.Yb(),p.Zb(2,"mat-dialog-actions"),p.Pc(3,ea,2,0,"h4",2),p.Pc(4,na,2,0,"h4",2),p.Ub(5,"hr"),p.Zb(6,"section",3),p.Zb(7,"div",4),p.Zb(8,"div",5),p.Zb(9,"div",6),p.Zb(10,"div",7),p.Zb(11,"div",8),p.Zb(12,"div",9),p.Zb(13,"label"),p.Rc(14," Organisation Name "),p.Zb(15,"span",10),p.Rc(16,"*"),p.Yb(),p.Yb(),p.Zb(17,"input",11),p.lc("ngModelChange",(function(t){return e.orgName=t})),p.Yb(),p.Pc(18,oa,3,2,"mat-error",12),p.Yb(),p.Yb(),p.Zb(19,"div",8),p.Zb(20,"div",9),p.Zb(21,"label"),p.Rc(22,"Organisation Type "),p.Zb(23,"span",10),p.Rc(24,"*"),p.Yb(),p.Yb(),p.Zb(25,"mat-select",13),p.lc("ngModelChange",(function(t){return e.orgType=t})),p.Zb(26,"mat-option",14),p.Rc(27,"School"),p.Yb(),p.Zb(28,"mat-option",15),p.Rc(29,"College"),p.Yb(),p.Zb(30,"mat-option",16),p.Rc(31,"Company"),p.Yb(),p.Zb(32,"mat-option",17),p.Rc(33,"Other"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(34,"div",8),p.Zb(35,"div",9),p.Zb(36,"label"),p.Rc(37," Bus Visibility "),p.Zb(38,"span",10),p.Rc(39,"*"),p.Yb(),p.Yb(),p.Zb(40,"mat-select",18),p.lc("ngModelChange",(function(t){return e.busVisibility=t})),p.Zb(41,"mat-option",19),p.Rc(42,"Only Assigned"),p.Yb(),p.Zb(43,"mat-option",20),p.Rc(44,"All"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(45,"div",8),p.Zb(46,"div",9),p.Zb(47,"label"),p.Rc(48," Track History Visibility "),p.Zb(49,"span",10),p.Rc(50,"*"),p.Yb(),p.Yb(),p.Zb(51,"mat-select",21),p.lc("ngModelChange",(function(t){return e.trackHistVisibility=t})),p.Zb(52,"mat-option",22),p.Rc(53,"All Time"),p.Yb(),p.Zb(54,"mat-option",23),p.Rc(55,"Specific Time"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(56,"div",8),p.Zb(57,"div",9),p.Zb(58,"label"),p.Rc(59,"Status "),p.Zb(60,"span",10),p.Rc(61,"*"),p.Yb(),p.Yb(),p.Zb(62,"mat-select",24),p.lc("ngModelChange",(function(t){return e.statusType=t})),p.Zb(63,"mat-option",25),p.Rc(64,"Active"),p.Yb(),p.Zb(65,"mat-option",26),p.Rc(66,"Inactive"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(67,"div",0),p.Zb(68,"div",9),p.Zb(69,"label"),p.Rc(70,"Logo "),p.Zb(71,"span",10),p.Rc(72,"*"),p.Yb(),p.Yb(),p.Zb(73,"input",27),p.lc("change",(function(n){p.Ic(t);const i=p.Ec(84);return e.uploadServiceImage(n,i)})),p.Yb(),p.Zb(74,"div",28),p.Ub(75,"img",29),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(76,"div",30),p.Zb(77,"div",9),p.Zb(78,"button",31),p.Rc(79,"Cancel"),p.Yb(),p.Pc(80,ra,2,0,"button",32),p.Pc(81,ca,2,0,"button",32),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(82,"div",33),p.Pc(83,la,25,4,"ng-template",null,34,p.Qc),p.Yb(),p.Yb()}2&t&&(p.Eb(3),p.vc("ngIf",e.isCreateOrganisation),p.Eb(1),p.vc("ngIf",!e.isCreateOrganisation),p.Eb(5),p.vc("formGroup",e.organisationForm),p.Eb(8),p.vc("ngModel",e.orgName),p.Eb(1),p.vc("ngIf",e.organisationForm.controls.org_name.errors&&e.organisationForm.controls.org_name.touched),p.Eb(7),p.vc("ngModel",e.orgType),p.Eb(15),p.vc("ngModel",e.busVisibility),p.Eb(11),p.vc("ngModel",e.trackHistVisibility),p.Eb(11),p.vc("ngModel",e.statusType),p.Eb(13),p.wc("src",e.org_logo_image,p.Kc),p.Eb(5),p.vc("ngIf",e.isCreateOrganisation),p.Eb(1),p.vc("ngIf",!e.isCreateOrganisation))},directives:[h.d,C.db,h.c,i.p,Tt.r,Tt.j,Tt.d,Tt.q,Tt.h,Tt.l,Yt.a,Pt.o,Rt.b,ta.a],styles:[".card-body[_ngcontent-%COMP%]{flex:1 1 auto;min-height:1px;padding:1.25rem}.required[_ngcontent-%COMP%]{color:red}label[_ngcontent-%COMP%]{font-weight:700}.mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.model-resize-outviwe[_ngcontent-%COMP%]{margin-top:70px;max-width:650px}.model-resize[_ngcontent-%COMP%]{height:450px;width:650px;margin-left:-110px}.mrl5[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}  .mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:hidden;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}"]}),t})();const ba=["content"];function ma(t,e){1&t&&(p.Zb(0,"th",36),p.Rc(1," ID "),p.Yb())}function da(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.index;p.Eb(1),p.Tc(" ",t+1," ")}}function ua(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Name "),p.Yb())}function ga(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",39),p.Zb(1,"a",40),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().editOrganisation(n)})),p.Rc(2),p.Yb(),p.Yb()}if(2&t){const t=e.$implicit;p.Eb(2),p.Tc(" ",t.org_name,"")}}function pa(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Logo Image "),p.Yb())}function ha(t,e){if(1&t&&(p.Zb(0,"td",37),p.Ub(1,"img",41),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.wc("src",t.logo_image,p.Kc)}}function fa(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Type "),p.Yb())}function _a(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.org_type," ")}}function Ca(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Bus Visibility"),p.Yb())}function va(t,e){if(1&t&&(p.Zb(0,"td",39),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.bus_visibility," ")}}function Da(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Track History Visibility "),p.Yb())}function Ta(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",t.track_history_visibility," ")}}function Ya(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Added Date & Time"),p.Yb())}function Pa(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Tc(" ",p.sc(2,1,t.added_date_time,"dd MMM yyyy hh:mm:ss a")," ")}}function Ra(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Updated Date & Time "),p.Yb())}function ya(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.qc(2,"date"),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(p.sc(2,1,t.updated_date_time,"dd MMM yyyy hh:mm:ss a"))}}function Za(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Status "),p.Yb())}function Ea(t,e){if(1&t&&(p.Zb(0,"td",37),p.Rc(1),p.Yb()),2&t){const t=e.$implicit;p.Eb(1),p.Sc(t.status)}}function xa(t,e){1&t&&(p.Zb(0,"th",38),p.Rc(1," Edit "),p.Yb())}function wa(t,e){if(1&t){const t=p.ac();p.Zb(0,"td",37),p.Zb(1,"a"),p.Zb(2,"i",42),p.lc("click",(function(){p.Ic(t);const n=e.$implicit;return p.pc().editOrganisation(n)})),p.Yb(),p.Yb(),p.Yb()}}function ka(t,e){1&t&&p.Ub(0,"tr",43)}function Ma(t,e){1&t&&p.Ub(0,"tr",44)}function Sa(t,e){1&t&&(p.Zb(0,"div",45),p.Zb(1,"p",46),p.Rc(2,"Data Not Found"),p.Yb(),p.Yb())}const Oa=function(){return{icon:"refresh-outline",pack:"eva"}},Ia=[{path:"",component:vt,children:[{path:"organisations",component:(()=>{class t{constructor(t,e,n){this.headerService=t,this.uTrackService=e,this.dialog=n,this.ELEMENT_DATA=[],this.displayedColumns=["id","name","logo_image","type","bus_visibility","track_history_visibility","added_date_time","updated_date_time","status","edit"],this.dataSource=new c.k(this.ELEMENT_DATA),this.TableDataNotshow=!1,this.filterValue=""}ngOnInit(){this.uTrackService.isUserValid(),this.headerService.updateHeaderTitle("Organisations"),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.bus_organisation_list()}bus_organisation_list(){const t=new FormData;t.append("user_id",localStorage.getItem("USER_ID")),this.uTrackService.bus_organisation_list(t).subscribe(t=>{t.status?(this.ELEMENT_DATA=[],null!=t.data&&null!=t.data&&t.data.length>0?(this.ELEMENT_DATA=t.data,this.ELEMENT_DATA.forEach(t=>{t.logo_image=null==t.logo_image||""===t.logo_image||""===t.logo_image?"assets/Default_Document.png":t.logo_image}),this.TableDataNotshow=!1,this.dataSource.data=this.ELEMENT_DATA):this.TableDataNotshow=!0):this.TableDataNotshow=!0})}applyFilter(t){"Enter"==t.key&&(this.filterValue=t.target.value,this.filterValue=this.filterValue.trim(),this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA)}refresh(){this.bus_organisation_list()}search(){this.filterValue=this.filterValue.trim(),this.filterValue=document.getElementById("search_element").value,this.dataSource.filter=this.filterValue,this.dataSource.data=this.ELEMENT_DATA}createOrganisation(){this.dialog.open(sa,{width:"50%"}).afterClosed().subscribe(t=>{this.bus_organisation_list()})}editOrganisation(t){let e=JSON.stringify(t);this.dialog.open(sa,{width:"50%",data:{bus_organisation_id:e}}).afterClosed().subscribe(t=>{this.bus_organisation_list()})}downloadPDF(){const t="Report generated on "+b.a.getDisplayTodayDateTime(),e="UTrack Organisation Report\n".concat(t);let n=[],i=1;for(let a of this.ELEMENT_DATA){let t=[];t.push(i.toString()),t.push(a.org_name),t.push(a.org_type),t.push(a.bus_visibility),t.push(a.track_history_visibility),t.push(b.a.getDisplayDateTime(a.added_date_time)),t.push(b.a.getDisplayDateTime(a.updated_date_time)),t.push(a.status),n.push(t),i++}g.a.downloadPdf(e,["ID","Name","Type","Bus Visibility","Track History Visibility","Added Date & time","Updated Date & Time","Status"],n,"OraganisationList")}Exportexcle(){let t=new s.Workbook,e=t.addWorksheet("Utrack");const n=t.addImage({base64:d.a.uTrackLogoWithBG,extension:"png"}),i=t.addImage({base64:d.a.ramkiLogo,extension:"png"});e.mergeCells("A1:B3"),e.addImage(n,"A1:B3"),e.mergeCells("G1:G3"),e.addImage(i,"G1:G3"),e.mergeCells("C1","F2");let a=e.getCell("C1");a.value="UTrack Organisation Report",a.font={name:"Calibri",size:18,underline:"single",bold:!0,color:{argb:"0085A3"}},a.alignment={vertical:"middle",horizontal:"center"},e.mergeCells("C3","F3");let o=e.getCell("C3");o.value="Report generated on "+b.a.getDisplayTodayDateTime(),o.font={name:"Calibri",size:14,underline:"single",bold:!0,color:{argb:"0085A3"}},o.alignment={vertical:"middle",horizontal:"center"},e.addRow([]),e.addRow(["ID","Name","Type","Bus Visibility","Track History Visibility","Added Date & time","Updated Date & Time","Status"]).eachCell((t,e)=>{t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"4167B8"},bgColor:{argb:""}},t.font={bold:!0,color:{argb:"FFFFFF"},size:14},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}});let r=1;for(let c of this.ELEMENT_DATA){let t=[];t.push(r.toString()),t.push(c.org_name),t.push(c.org_type),t.push(c.bus_visibility),t.push(c.track_history_visibility),t.push(b.a.getDisplayDateTime(c.added_date_time)),t.push(b.a.getDisplayDateTime(c.updated_date_time)),t.push(c.status),e.addRow(t),r++}e.getColumn(1).width=5,e.getColumn(2).width=30,e.getColumn(3).width=12,e.getColumn(4).width=20,e.getColumn(5).width=35,e.getColumn(6).width=30,e.getColumn(7).width=30,e.getColumn(8).width=12,e.addRow([]),t.xlsx.writeBuffer().then(t=>{let e=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});l.saveAs(e,"OraganisationList.xlsx")})}}return t.\u0275fac=function(e){return new(e||t)(p.Tb(m.a),p.Tb(u.a),p.Tb(h.b))},t.\u0275cmp=p.Nb({type:t,selectors:[["ngx-organisations"]],viewQuery:function(t,e){var n;1&t&&(p.Nc(o.a,!0),p.Nc(r.a,!0),p.Yc(ba,!0)),2&t&&(p.Dc(n=p.mc())&&(e.paginator=n.first),p.Dc(n=p.mc())&&(e.sort=n.first),p.Dc(n=p.mc())&&(e.content=n.first))},decls:57,vars:7,consts:[[1,"row","clearfix"],[1,"col-md-8","text-left"],["type","search","matInput","","id","search_element","placeholder","Search Organisation",1,"form-control","search-field","pull-left",3,"keyup"],[1,"btn","btn-primary","pull-left","ml-20","mr15","btn-sm",3,"click"],[1,"fa","fa-search"],["mat-button","",1,"btn","btn-danger","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-excel"],["mat-button","",1,"btn","btn-primary","pull-left","mr15","btn-sm",3,"click"],[1,"fa","fa-file-pdf"],["nbTooltip","Refresh","nbTooltipStatus","success",1,"btn","btn-success","pull-left","mr1","btn-sm",3,"nbTooltipIcon","click"],[1,"fa","fa-sync"],[1,"col-md-4","ml-auto","text-right"],[1,"form-group"],[1,"btn","btn-warning","btn-sm",3,"click"],["id","content",1,"example-container","mat-elevation-z8"],["content",""],[1,"table-responsive",2,"height","500px","overflow","auto !important"],["mat-table","","matSort","",1,"table-bordered","table",3,"dataSource"],["matColumnDef","id"],["class","bg-primary !important ml15","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["class","bg-primary !important","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","cellSpace","mat-cell","",4,"matCellDef"],["matColumnDef","logo_image"],["matColumnDef","type"],["mat-cell","","class","cellSpace",4,"matCellDef"],["matColumnDef","bus_visibility"],["matColumnDef","track_history_visibility"],["matColumnDef","added_date_time"],["matColumnDef","updated_date_time"],["matColumnDef","status"],["matColumnDef","edit"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","col-md-12","style","margin-top: 180px;",4,"ngIf"],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important","ml15"],["mat-cell",""],["mat-header-cell","","mat-sort-header","",1,"bg-primary","!important"],["mat-cell","",1,"cellSpace"],[2,"cursor","pointer","text-decoration","underline","color","blue",3,"click"],[1,"img-circle",3,"src"],[1,"fa","fa-edit","text-blue",2,"cursor","pointer","color","blue",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-md-12",2,"margin-top","180px"],[1,"datanotfound"]],template:function(t,e){1&t&&(p.Zb(0,"div",0),p.Zb(1,"div",1),p.Zb(2,"label"),p.Zb(3,"input",2),p.lc("keyup",(function(t){return e.applyFilter(t)})),p.Yb(),p.Yb(),p.Zb(4,"button",3),p.lc("click",(function(){return e.search()})),p.Ub(5,"i",4),p.Yb(),p.Zb(6,"button",5),p.lc("click",(function(){return e.Exportexcle()})),p.Ub(7,"i",6),p.Rc(8," \xa0 Export to Excel "),p.Yb(),p.Zb(9,"button",7),p.lc("click",(function(){return e.downloadPDF()})),p.Ub(10,"i",8),p.Rc(11," \xa0 Export to PDF "),p.Yb(),p.Zb(12,"button",9),p.lc("click",(function(){return e.refresh()})),p.Ub(13,"i",10),p.Yb(),p.Yb(),p.Zb(14,"div",11),p.Zb(15,"div",12),p.Zb(16,"button",13),p.lc("click",(function(){return e.createOrganisation()})),p.Zb(17,"b"),p.Rc(18,"+ Create Organisation"),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Yb(),p.Zb(19,"div"),p.Zb(20,"div",14,15),p.Zb(22,"div",16),p.Zb(23,"table",17),p.Xb(24,18),p.Pc(25,ma,2,0,"th",19),p.Pc(26,da,2,1,"td",20),p.Wb(),p.Xb(27,21),p.Pc(28,ua,2,0,"th",22),p.Pc(29,ga,3,1,"td",23),p.Wb(),p.Xb(30,24),p.Pc(31,pa,2,0,"th",22),p.Pc(32,ha,2,1,"td",20),p.Wb(),p.Xb(33,25),p.Pc(34,fa,2,0,"th",22),p.Pc(35,_a,2,1,"td",26),p.Wb(),p.Xb(36,27),p.Pc(37,Ca,2,0,"th",22),p.Pc(38,va,2,1,"td",26),p.Wb(),p.Xb(39,28),p.Pc(40,Da,2,0,"th",22),p.Pc(41,Ta,2,1,"td",20),p.Wb(),p.Xb(42,29),p.Pc(43,Ya,2,0,"th",22),p.Pc(44,Pa,3,4,"td",20),p.Wb(),p.Xb(45,30),p.Pc(46,Ra,2,0,"th",22),p.Pc(47,ya,3,4,"td",20),p.Wb(),p.Xb(48,31),p.Pc(49,Za,2,0,"th",22),p.Pc(50,Ea,2,1,"td",20),p.Wb(),p.Xb(51,32),p.Pc(52,xa,2,0,"th",22),p.Pc(53,wa,3,0,"td",20),p.Wb(),p.Pc(54,ka,1,0,"tr",33),p.Pc(55,Ma,1,0,"tr",34),p.Yb(),p.Pc(56,Sa,3,0,"div",35),p.Yb(),p.Yb(),p.Yb()),2&t&&(p.Eb(12),p.vc("nbTooltipIcon",p.zc(6,Oa)),p.Eb(11),p.vc("dataSource",e.dataSource),p.Eb(31),p.vc("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),p.Eb(1),p.vc("matRowDefColumns",e.displayedColumns),p.Eb(1),p.vc("ngIf",e.TableDataNotshow))},directives:[f.b,_.a,C.db,c.j,r.a,c.c,c.e,c.b,c.g,c.i,i.p,c.d,r.b,c.a,c.f,c.h],pipes:[i.e],styles:[".mrleftright[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#fff!important;vertical-align:middle!important;padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px!important}.example-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{overflow-x:scroll!important}.mr15[_ngcontent-%COMP%]{margin-right:15px!important}.mr12[_ngcontent-%COMP%]{margin-left:-49px;padding:1px 1px 0}.mt50[_ngcontent-%COMP%]{margin-top:76px}.my-custom-scrollbar[_ngcontent-%COMP%]{overflow:auto}.table-wrapper-scroll-y[_ngcontent-%COMP%]{display:block}.mat-button[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}.mat-input-element[_ngcontent-%COMP%]{line-height:auto;padding:6px;height:auto;font-size:12px;border:1px solid #0779e4;background:#fff}.ml-20[_ngcontent-%COMP%]{margin-left:-20px!important}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{padding:.25rem .5rem;font-size:.875rem;line-height:1.7;border-radius:.2rem}tr[_ngcontent-%COMP%]:hover{background-color:#b3f0ff}.img-circle[_ngcontent-%COMP%]{border-radius:50%!important;overflow:hidden;width:65px;height:65px;border:2px solid #1654c0;margin:0 auto 20px}.datanotfound[_ngcontent-%COMP%]{font-size:25px;text-align:center;margin-top:180px;margin-bottom:180px;font-weight:700}"]}),t})()},{path:"branches",component:G},{path:"employees",component:Qi},{path:"geofence",component:Ct},{path:"bus_routes",component:on},{path:"bus_trips",component:Kn},{path:"passengers",component:ve},{path:"bus_timings",component:wn},{path:"bus_notifications",component:Dt},{path:"buses",component:yi}]}];let Na=(()=>{class t{}return t.\u0275mod=p.Rb({type:t}),t.\u0275inj=p.Qb({factory:function(e){return new(e||t)},imports:[[a.g.forChild(Ia)],a.g]}),t})();var Aa=n("u47x"),Fa=n("UXJo"),Ua=n("5+WD"),Ba=n("+rOU"),La=n("vxfF"),za=n("B/XX"),Wa=n("f6nW"),Va=n("FvrZ"),$a=n("tk/3"),Xa=n("/1cH"),Ga=n("TU8p"),Ha=n("2ChS"),qa=n("jaxi"),ja=n("Wp6s"),Ja=n("bSwM"),Qa=n("A5z7"),Ka=n("iadO"),to=n("f0Cb"),eo=n("7EHt"),no=n("zkoq"),io=n("NFeN"),ao=n("MutI"),oo=n("STbY"),ro=n("bv9b"),co=n("Xa2L"),lo=n("QibW"),so=n("XhcP"),bo=n("1jcm"),mo=n("5RNC"),uo=n("dNgK"),go=n("xHqg"),po=n("wZkO"),ho=n("/t3+"),fo=n("Qu3c"),_o=n("8yBR"),Co=n("sYmb"),vo=n("KUt4"),Do=n("T7NJ"),To=n("9OaD"),Yo=n("LPYB"),Po=n("Kb4U"),Ro=n("DKVz"),yo=n("WJ5W"),Zo=n("vTDv"),Eo=n("/2RN"),xo=n("ivxX"),wo=n("dgmN"),ko=n("pxUr"),Mo=n("IZFd");n.d(e,"BusManagementModule",(function(){return So}));let So=(()=>{class t{}return t.\u0275mod=p.Rb({type:t}),t.\u0275inj=p.Qb({factory:function(e){return new(e||t)},imports:[[i.c,Na,Tt.k,Tt.x,Zo.a,C.N,Eo.a,xo.MiscellaneousModule,Tt.k,Tt.x,Aa.a,Fa.a,za.e,Wa.q,Va.d,Ua.a,Xa.a,Ga.a,Ha.a,_.b,qa.c,ja.f,Ja.b,Qa.a,go.a,Ka.e,h.f,to.a,eo.b,no.a,io.b,f.c,Rt.e,ao.a,oo.a,Pt.m,o.b,ro.a,co.a,lo.c,Pt.u,Yt.b,so.a,mo.a,bo.b,uo.b,r.c,c.l,po.d,ho.a,fo.b,_o.a,Ba.h,La.d,vo.b,$a.c,Do.a.forRoot(),C.eb,C.g,Yo.a,C.B,rn.e,rn.c,Ro.a,C.r,yo.b,Co.b.forChild({loader:{provide:Co.a,useFactory:wo.HttpLoaderFactory,deps:[$a.b]}}),To.a,Po.b,ta.b,ko.b.forRoot({apiKey:"AIzaSyDCiXdCAmivYYCHOl3yDmePcYYfcSxODR0",libraries:["places"]}),ko.b.forRoot({apiKey:"AIzaSyDCiXdCAmivYYCHOl3yDmePcYYfcSxODR0"}),Mo.a]]}),t})()}}]);